;(function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0](function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i})({1:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
var dom, post_list;

post_list = require("./data");

console.log(post_list);

dom = require("./dom");

window.onload = function() {
  dom.render_list(post_list.by_sort);
  dom.bind_top(function() {
    return dom.render_list(post_list.by_sort);
  });
  dom.bind_new(function() {
    return dom.render_list(post_list.by_time);
  });
  return dom.bind_list(function(event) {
    var tag;

    tag = event.target;
    switch (tag.className) {
      case "title":
        return dom.render_post(tag);
      case "link":
        return dom.open_link(tag.innerText);
    }
  });
};

},{"./data":2,"./dom":3}],4:[function(require,module,exports){
// nothing to see here... no file methods for the browser

},{}],5:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};

process.nextTick = (function () {
    var canSetImmediate = typeof window !== 'undefined'
    && window.setImmediate;
    var canPost = typeof window !== 'undefined'
    && window.postMessage && window.addEventListener
    ;

    if (canSetImmediate) {
        return function (f) { return window.setImmediate(f) };
    }

    if (canPost) {
        var queue = [];
        window.addEventListener('message', function (ev) {
            if (ev.source === window && ev.data === 'process-tick') {
                ev.stopPropagation();
                if (queue.length > 0) {
                    var fn = queue.shift();
                    fn();
                }
            }
        }, true);

        return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
        };
    }

    return function nextTick(fn) {
        setTimeout(fn, 0);
    };
})();

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];

process.binding = function (name) {
    throw new Error('process.binding is not supported');
}

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};

},{}],6:[function(require,module,exports){
(function(process){function filter (xs, fn) {
    var res = [];
    for (var i = 0; i < xs.length; i++) {
        if (fn(xs[i], i, xs)) res.push(xs[i]);
    }
    return res;
}

// resolves . and .. elements in a path array with directory names there
// must be no slashes, empty elements, or device names (c:\) in the array
// (so also no leading and trailing slashes - it does not distinguish
// relative and absolute paths)
function normalizeArray(parts, allowAboveRoot) {
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = parts.length; i >= 0; i--) {
    var last = parts[i];
    if (last == '.') {
      parts.splice(i, 1);
    } else if (last === '..') {
      parts.splice(i, 1);
      up++;
    } else if (up) {
      parts.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (allowAboveRoot) {
    for (; up--; up) {
      parts.unshift('..');
    }
  }

  return parts;
}

// Regex to split a filename into [*, dir, basename, ext]
// posix version
var splitPathRe = /^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;

// path.resolve([from ...], to)
// posix version
exports.resolve = function() {
var resolvedPath = '',
    resolvedAbsolute = false;

for (var i = arguments.length; i >= -1 && !resolvedAbsolute; i--) {
  var path = (i >= 0)
      ? arguments[i]
      : process.cwd();

  // Skip empty and invalid entries
  if (typeof path !== 'string' || !path) {
    continue;
  }

  resolvedPath = path + '/' + resolvedPath;
  resolvedAbsolute = path.charAt(0) === '/';
}

// At this point the path should be resolved to a full absolute path, but
// handle relative paths to be safe (might happen when process.cwd() fails)

// Normalize the path
resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {
    return !!p;
  }), !resolvedAbsolute).join('/');

  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';
};

// path.normalize(path)
// posix version
exports.normalize = function(path) {
var isAbsolute = path.charAt(0) === '/',
    trailingSlash = path.slice(-1) === '/';

// Normalize the path
path = normalizeArray(filter(path.split('/'), function(p) {
    return !!p;
  }), !isAbsolute).join('/');

  if (!path && !isAbsolute) {
    path = '.';
  }
  if (path && trailingSlash) {
    path += '/';
  }
  
  return (isAbsolute ? '/' : '') + path;
};


// posix version
exports.join = function() {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(filter(paths, function(p, index) {
    return p && typeof p === 'string';
  }).join('/'));
};


exports.dirname = function(path) {
  var dir = splitPathRe.exec(path)[1] || '';
  var isWindows = false;
  if (!dir) {
    // No dirname
    return '.';
  } else if (dir.length === 1 ||
      (isWindows && dir.length <= 3 && dir.charAt(1) === ':')) {
    // It is just a slash or a drive letter with a slash
    return dir;
  } else {
    // It is a full dirname, strip trailing slash
    return dir.substring(0, dir.length - 1);
  }
};


exports.basename = function(path, ext) {
  var f = splitPathRe.exec(path)[2] || '';
  // TODO: make this comparison case-insensitive on windows?
  if (ext && f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
};


exports.extname = function(path) {
  return splitPathRe.exec(path)[3] || '';
};

exports.relative = function(from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start < arr.length; start++) {
      if (arr[start] !== '') break;
    }

    var end = arr.length - 1;
    for (; end >= 0; end--) {
      if (arr[end] !== '') break;
    }

    if (start > end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split('/'));
  var toParts = trim(to.split('/'));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i < length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i < fromParts.length; i++) {
    outputParts.push('..');
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join('/');
};

})(require("__browserify_process"))
},{"__browserify_process":5}],2:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
var a, article_list, data, fs, list, path, value, _;

fs = require("fs");

path = require("path");

article_list = ["./posts/about-coder-news", "./posts/future-of-UI", "./posts/why-collect-links", "./posts/love-languages", "./posts/join-communities", "./posts/everyone-gets-old", "./posts/you-and-me-different", "./posts/about-this-site"];

a = "./posts/about-coder-news";

require(a);

data = {
  0: require("./posts/about-coder-news"),
  1: require("./posts/future-of-UI"),
  2: require("./posts/why-collect-links"),
  3: require("./posts/love-languages"),
  4: require("./posts/join-communities"),
  5: require("./posts/everyone-gets-old"),
  6: require("./posts/you-and-me-different"),
  7: require("./posts/about-this-site"),
  8: {
    title: "提议: 我们变通下 HN 的方式, 在 Github 上创建一个技术论坛",
    link: "http://v2ex.com/t/65472"
  }
};

list = (function() {
  var _results;

  _results = [];
  for (_ in data) {
    value = data[_];
    _results.push(value);
  }
  return _results;
})();

exports.by_time = list;

exports.by_sort = list.concat().sort(function(a, b) {
  if (a.title > b.title) {
    return 1;
  } else {
    return -1;
  }
});

console.log(list);

},{"fs":4,"path":6,"./posts/about-coder-news":7,"./posts/future-of-UI":8,"./posts/love-languages":9,"./posts/join-communities":10,"./posts/everyone-gets-old":11,"./posts/you-and-me-different":12,"./posts/about-this-site":13,"./posts/why-collect-links":14}],7:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "我发帖讲关于 Coder News 这个名字的经历";

exports.content = "";

},{}],8:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "漂亮的 UI 是网页发展的方向";

exports.content = "";

},{}],9:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "编程语言的爱好, 的生活态度";

exports.content = "";

},{}],10:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "让人羡慕的社区";

exports.content = "";

},{}],11:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "人总是要衰老的, 变得和自己想的不一样, 变得成熟";

exports.content = "";

},{}],12:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "世界上有的人强, 有的人弱, 事情就是这样";

exports.content = "";

},{}],13:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "关于现在这个页面, 为什么要搭建这个页面";

exports.content = "晚上认真看了几个篇新闻, 都是 Startup News 上的, 有点被打动\n本来吃过晚饭出门, 就有种三更半夜行走在学校的不安的感觉了\n昏昏沉沉地看着文章, 联想到一些, 就在下边加评论做提示\n看到 V2EX 扯过的 @Hit9 链接都被放到上边了, 马上搜到 Github\n一想, Startup News 上评论的人太少了, 依然没有效果呀\n\n我看的几篇文章多多少少提到社区, 而我对此越发感到憧憬着\n这时候真有些无奈, 想到界面的设计, 就好像把之前没做的做出来\n晚上忙着搭框架, 断续一个多小时, coffee 的框架基本完成了\n眼看现在已经过了凌晨, 我真没力气再安心折腾下去\n有些事情会是一时伤感, 兴起去做, 兴尽而止, 希望这不是";

},{}],14:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "为什么要搜集资源, 收集资源的弊端, 我应该怎么做";

exports.content = "";

},{}],3:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
var auther, css, html, q, render_title, _ref;

_ref = require("lilyturf"), html = _ref.html, css = _ref.css;

q = function(query) {
  return document.querySelector(query);
};

Element.prototype.q = function(query) {
  return this.querySelector(query);
};

auther = {
  name: "jiyinyiyong",
  avatar: "http://photos.tuchong.com/108934/f/2159629.jpg"
};

render_title = function(post) {
  return html(function() {
    return this.div({
      "class": "post"
    }, this.img({
      "class": "avatar",
      src: auther.avatar,
      title: auther.name
    }), this.div({
      "class": "item"
    }, this.div({
      "class": "title",
      data: post.content
    }, post.title), this.span({
      "class": "link"
    }, post.link != null ? post.link : "self")));
  });
};

exports.render_list = function(post_list) {
  var list;

  list = q("#list");
  return list.innerHTML = html(function() {
    return this.div({
      "class": "container"
    }, post_list.map(render_title).join(""));
  });
};

exports.bind_list = function(callback) {
  var list;

  list = q("#list");
  return list.onclick = callback;
};

exports.render_post = function(tag) {
  q("#title").innerText = tag.innerText;
  q("#content").innerText = tag.content || "";
  if (tag.link) {
    q(".link").innerText = tag.link;
    return q(".link").href = "http://" + tag.link;
  }
};

exports.open_link = function(link) {
  if (link.match(/\w\.\w/)) {
    return window.open(link);
  }
};

exports.bind_top = function(callback) {
  return q(".menu .top").onclick = callback;
};

exports.bind_new = function(callback) {
  return q(".menu .new").onclick = callback;
};

},{"lilyturf":15}],15:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
var css, css_tools, html_scope, html_tools, pair_elems, resolve, single_elems,
  __slice = [].slice;

html_scope = {};

pair_elems = "head title body script  div nav header footer section article  p span textarea br pre code a address b backquote  button font frame form hr i  ul li ol table tr td th title  canvas audio video select style".split(/\s+/);

single_elems = "img meta input link iframe audio video".split(/\s+/);

html_tools = {
  attrs: function(obj) {
    var attrs, key, value;

    attrs = "";
    for (key in obj) {
      value = obj[key];
      attrs += " " + key + "='" + value + "'";
    }
    return attrs;
  },
  text: function(text) {
    return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\s/g, "&nbsp;");
  }
};

resolve = function(list) {
  var elem, obj;

  obj = {};
  elem = [];
  list.forEach(function(item) {
    var key, that, value, _i, _len, _results, _results1;

    if (item != null) {
      if (item.__proto__ === Object.prototype) {
        _results = [];
        for (key in item) {
          value = item[key];
          _results.push(obj[key] = value);
        }
        return _results;
      } else if (item.__proto__ === Array.prototype) {
        _results1 = [];
        for (_i = 0, _len = item.length; _i < _len; _i++) {
          that = item[_i];
          _results1.push(elem.push(that));
        }
        return _results1;
      } else {
        return elem.push(item);
      }
    }
  });
  return [obj, elem];
};

pair_elems.map(function(tag) {
  return html_scope[tag] = function() {
    var list, obj, _ref;

    list = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    _ref = resolve(list), obj = _ref[0], list = _ref[1];
    return "<" + tag + (html_tools.attrs(obj)) + ">" + (list.join("")) + "</" + tag + ">";
  };
});

single_elems.map(function(tag) {
  return html_scope[tag] = function(obj) {
    if (obj == null) {
      obj = {};
    }
    return "<" + tag + (html_tools.attrs(obj)) + "/>";
  };
});

html_scope.html = function(string) {
  return string;
};

html_scope.text = html_tools.text;

css_tools = {
  template: function(base, selector, declaration) {
    return "" + base + " " + selector + "{\n" + declaration + "\n}\n";
  },
  utils: {
    hsl: function(h, s, l) {
      return "hsl(" + h + ", " + s + "%, " + l + "%)";
    },
    hsla: function(h, s, l, a) {
      return "hsl(" + h + ", " + s + "%, " + l + "%, " + a + ")";
    }
  },
  type: function(value) {
    var match, string;

    match = Object.prototype.toString.call(value).match(/\s\w+/);
    string = match[0].slice(1);
    return string.toLowerCase();
  },
  pretty: function(char) {
    if (char.match(/^[A-Z]$/) != null) {
      return "-" + char.toLowerCase();
    } else {
      return char;
    }
  }
};

css = function(generator) {
  var data, style, write_rule;

  style = "";
  css_tools.utils.generator = generator;
  data = css_tools.utils.generator();
  write_rule = function(base, data) {
    var attribute, declaration, nest_selector, nested, plain, rule, selector, value, values, _i, _len, _results;

    nested = {};
    for (selector in data) {
      declaration = data[selector];
      plain = [];
      for (attribute in declaration) {
        value = declaration[attribute];
        if ((css_tools.type(value)) === "object") {
          nest_selector = "" + base + " " + selector;
          if (nested[nest_selector] == null) {
            nested[nest_selector] = {};
          }
          nested[nest_selector][attribute] = value;
        } else {
          attribute = attribute.split("").map(css_tools.pretty).join("");
          if ((css_tools.type(value)) === "number") {
            value = "" + value + "px";
          }
          if ((css_tools.type(value)) === "array") {
            values = value;
            for (_i = 0, _len = values.length; _i < _len; _i++) {
              value = values[_i];
              plain.push("  " + attribute + ": " + value + ";");
            }
          } else {
            plain.push("  " + attribute + ": " + value + ";");
          }
        }
      }
      if (plain.length > 0) {
        declaration = plain.join("\n");
        rule = css_tools.template(base, selector, declaration);
        style += rule.trimLeft();
      }
    }
    if ((Object.keys(nested)).length > 0) {
      _results = [];
      for (base in nested) {
        data = nested[base];
        _results.push(write_rule(base, data));
      }
      return _results;
    }
  };
  write_rule("", data);
  return style;
};

exports.html = function(generator) {
  return generator.call(html_scope);
};

exports.css = function(data) {
  return css(data);
};

},{}]},{},[1])
//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvb3B0L3MvYXJ0aWNsZS8wOC1jb2Rlci1uZXdzL2xpYi9tYWluLmpzIiwiL3Vzci9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcmVzb2x2ZS9idWlsdGluL2ZzLmpzIiwiL3Vzci9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2luc2VydC1tb2R1bGUtZ2xvYmFscy9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwiL3Vzci9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcmVzb2x2ZS9idWlsdGluL3BhdGguanMiLCIvb3B0L3MvYXJ0aWNsZS8wOC1jb2Rlci1uZXdzL2xpYi9kYXRhLmpzIiwiL29wdC9zL2FydGljbGUvMDgtY29kZXItbmV3cy9saWIvcG9zdHMvYWJvdXQtY29kZXItbmV3cy5qcyIsIi9vcHQvcy9hcnRpY2xlLzA4LWNvZGVyLW5ld3MvbGliL3Bvc3RzL2Z1dHVyZS1vZi1VSS5qcyIsIi9vcHQvcy9hcnRpY2xlLzA4LWNvZGVyLW5ld3MvbGliL3Bvc3RzL2xvdmUtbGFuZ3VhZ2VzLmpzIiwiL29wdC9zL2FydGljbGUvMDgtY29kZXItbmV3cy9saWIvcG9zdHMvam9pbi1jb21tdW5pdGllcy5qcyIsIi9vcHQvcy9hcnRpY2xlLzA4LWNvZGVyLW5ld3MvbGliL3Bvc3RzL2V2ZXJ5b25lLWdldHMtb2xkLmpzIiwiL29wdC9zL2FydGljbGUvMDgtY29kZXItbmV3cy9saWIvcG9zdHMveW91LWFuZC1tZS1kaWZmZXJlbnQuanMiLCIvb3B0L3MvYXJ0aWNsZS8wOC1jb2Rlci1uZXdzL2xpYi9wb3N0cy9hYm91dC10aGlzLXNpdGUuanMiLCIvb3B0L3MvYXJ0aWNsZS8wOC1jb2Rlci1uZXdzL2xpYi9wb3N0cy93aHktY29sbGVjdC1saW5rcy5qcyIsIi9vcHQvcy9hcnRpY2xlLzA4LWNvZGVyLW5ld3MvbGliL2RvbS5qcyIsIi9vcHQvcy9hcnRpY2xlLzA4LWNvZGVyLW5ld3Mvbm9kZV9tb2R1bGVzL2xpbHl0dXJmL2xpbHl0dXJmLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS42LjJcbnZhciBkb20sIHBvc3RfbGlzdDtcblxucG9zdF9saXN0ID0gcmVxdWlyZShcIi4vZGF0YVwiKTtcblxuY29uc29sZS5sb2cocG9zdF9saXN0KTtcblxuZG9tID0gcmVxdWlyZShcIi4vZG9tXCIpO1xuXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gIGRvbS5yZW5kZXJfbGlzdChwb3N0X2xpc3QuYnlfc29ydCk7XG4gIGRvbS5iaW5kX3RvcChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZG9tLnJlbmRlcl9saXN0KHBvc3RfbGlzdC5ieV9zb3J0KTtcbiAgfSk7XG4gIGRvbS5iaW5kX25ldyhmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZG9tLnJlbmRlcl9saXN0KHBvc3RfbGlzdC5ieV90aW1lKTtcbiAgfSk7XG4gIHJldHVybiBkb20uYmluZF9saXN0KGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdmFyIHRhZztcblxuICAgIHRhZyA9IGV2ZW50LnRhcmdldDtcbiAgICBzd2l0Y2ggKHRhZy5jbGFzc05hbWUpIHtcbiAgICAgIGNhc2UgXCJ0aXRsZVwiOlxuICAgICAgICByZXR1cm4gZG9tLnJlbmRlcl9wb3N0KHRhZyk7XG4gICAgICBjYXNlIFwibGlua1wiOlxuICAgICAgICByZXR1cm4gZG9tLm9wZW5fbGluayh0YWcuaW5uZXJUZXh0KTtcbiAgICB9XG4gIH0pO1xufTtcbiIsIi8vIG5vdGhpbmcgdG8gc2VlIGhlcmUuLi4gbm8gZmlsZSBtZXRob2RzIGZvciB0aGUgYnJvd3NlclxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxucHJvY2Vzcy5uZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNhblNldEltbWVkaWF0ZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgJiYgd2luZG93LnNldEltbWVkaWF0ZTtcbiAgICB2YXIgY2FuUG9zdCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgJiYgd2luZG93LnBvc3RNZXNzYWdlICYmIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyXG4gICAgO1xuXG4gICAgaWYgKGNhblNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGYpIHsgcmV0dXJuIHdpbmRvdy5zZXRJbW1lZGlhdGUoZikgfTtcbiAgICB9XG5cbiAgICBpZiAoY2FuUG9zdCkge1xuICAgICAgICB2YXIgcXVldWUgPSBbXTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIGlmIChldi5zb3VyY2UgPT09IHdpbmRvdyAmJiBldi5kYXRhID09PSAncHJvY2Vzcy10aWNrJykge1xuICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gbmV4dFRpY2soZm4pIHtcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goZm4pO1xuICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKCdwcm9jZXNzLXRpY2snLCAnKicpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0VGljayhmbikge1xuICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICB9O1xufSkoKTtcblxucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufVxuXG4vLyBUT0RPKHNodHlsbWFuKVxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG4iLCIoZnVuY3Rpb24ocHJvY2Vzcyl7ZnVuY3Rpb24gZmlsdGVyICh4cywgZm4pIHtcbiAgICB2YXIgcmVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZm4oeHNbaV0sIGksIHhzKSkgcmVzLnB1c2goeHNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuXG4vLyByZXNvbHZlcyAuIGFuZCAuLiBlbGVtZW50cyBpbiBhIHBhdGggYXJyYXkgd2l0aCBkaXJlY3RvcnkgbmFtZXMgdGhlcmVcbi8vIG11c3QgYmUgbm8gc2xhc2hlcywgZW1wdHkgZWxlbWVudHMsIG9yIGRldmljZSBuYW1lcyAoYzpcXCkgaW4gdGhlIGFycmF5XG4vLyAoc28gYWxzbyBubyBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzIC0gaXQgZG9lcyBub3QgZGlzdGluZ3Vpc2hcbi8vIHJlbGF0aXZlIGFuZCBhYnNvbHV0ZSBwYXRocylcbmZ1bmN0aW9uIG5vcm1hbGl6ZUFycmF5KHBhcnRzLCBhbGxvd0Fib3ZlUm9vdCkge1xuICAvLyBpZiB0aGUgcGF0aCB0cmllcyB0byBnbyBhYm92ZSB0aGUgcm9vdCwgYHVwYCBlbmRzIHVwID4gMFxuICB2YXIgdXAgPSAwO1xuICBmb3IgKHZhciBpID0gcGFydHMubGVuZ3RoOyBpID49IDA7IGktLSkge1xuICAgIHZhciBsYXN0ID0gcGFydHNbaV07XG4gICAgaWYgKGxhc3QgPT0gJy4nKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgfSBlbHNlIGlmIChsYXN0ID09PSAnLi4nKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgICB1cCsrO1xuICAgIH0gZWxzZSBpZiAodXApIHtcbiAgICAgIHBhcnRzLnNwbGljZShpLCAxKTtcbiAgICAgIHVwLS07XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhlIHBhdGggaXMgYWxsb3dlZCB0byBnbyBhYm92ZSB0aGUgcm9vdCwgcmVzdG9yZSBsZWFkaW5nIC4uc1xuICBpZiAoYWxsb3dBYm92ZVJvb3QpIHtcbiAgICBmb3IgKDsgdXAtLTsgdXApIHtcbiAgICAgIHBhcnRzLnVuc2hpZnQoJy4uJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBhcnRzO1xufVxuXG4vLyBSZWdleCB0byBzcGxpdCBhIGZpbGVuYW1lIGludG8gWyosIGRpciwgYmFzZW5hbWUsIGV4dF1cbi8vIHBvc2l4IHZlcnNpb25cbnZhciBzcGxpdFBhdGhSZSA9IC9eKC4rXFwvKD8hJCl8XFwvKT8oKD86Lis/KT8oXFwuW14uXSopPykkLztcblxuLy8gcGF0aC5yZXNvbHZlKFtmcm9tIC4uLl0sIHRvKVxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5yZXNvbHZlID0gZnVuY3Rpb24oKSB7XG52YXIgcmVzb2x2ZWRQYXRoID0gJycsXG4gICAgcmVzb2x2ZWRBYnNvbHV0ZSA9IGZhbHNlO1xuXG5mb3IgKHZhciBpID0gYXJndW1lbnRzLmxlbmd0aDsgaSA+PSAtMSAmJiAhcmVzb2x2ZWRBYnNvbHV0ZTsgaS0tKSB7XG4gIHZhciBwYXRoID0gKGkgPj0gMClcbiAgICAgID8gYXJndW1lbnRzW2ldXG4gICAgICA6IHByb2Nlc3MuY3dkKCk7XG5cbiAgLy8gU2tpcCBlbXB0eSBhbmQgaW52YWxpZCBlbnRyaWVzXG4gIGlmICh0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycgfHwgIXBhdGgpIHtcbiAgICBjb250aW51ZTtcbiAgfVxuXG4gIHJlc29sdmVkUGF0aCA9IHBhdGggKyAnLycgKyByZXNvbHZlZFBhdGg7XG4gIHJlc29sdmVkQWJzb2x1dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xufVxuXG4vLyBBdCB0aGlzIHBvaW50IHRoZSBwYXRoIHNob3VsZCBiZSByZXNvbHZlZCB0byBhIGZ1bGwgYWJzb2x1dGUgcGF0aCwgYnV0XG4vLyBoYW5kbGUgcmVsYXRpdmUgcGF0aHMgdG8gYmUgc2FmZSAobWlnaHQgaGFwcGVuIHdoZW4gcHJvY2Vzcy5jd2QoKSBmYWlscylcblxuLy8gTm9ybWFsaXplIHRoZSBwYXRoXG5yZXNvbHZlZFBhdGggPSBub3JtYWxpemVBcnJheShmaWx0ZXIocmVzb2x2ZWRQYXRoLnNwbGl0KCcvJyksIGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gISFwO1xuICB9KSwgIXJlc29sdmVkQWJzb2x1dGUpLmpvaW4oJy8nKTtcblxuICByZXR1cm4gKChyZXNvbHZlZEFic29sdXRlID8gJy8nIDogJycpICsgcmVzb2x2ZWRQYXRoKSB8fCAnLic7XG59O1xuXG4vLyBwYXRoLm5vcm1hbGl6ZShwYXRoKVxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5ub3JtYWxpemUgPSBmdW5jdGlvbihwYXRoKSB7XG52YXIgaXNBYnNvbHV0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLycsXG4gICAgdHJhaWxpbmdTbGFzaCA9IHBhdGguc2xpY2UoLTEpID09PSAnLyc7XG5cbi8vIE5vcm1hbGl6ZSB0aGUgcGF0aFxucGF0aCA9IG5vcm1hbGl6ZUFycmF5KGZpbHRlcihwYXRoLnNwbGl0KCcvJyksIGZ1bmN0aW9uKHApIHtcbiAgICByZXR1cm4gISFwO1xuICB9KSwgIWlzQWJzb2x1dGUpLmpvaW4oJy8nKTtcblxuICBpZiAoIXBhdGggJiYgIWlzQWJzb2x1dGUpIHtcbiAgICBwYXRoID0gJy4nO1xuICB9XG4gIGlmIChwYXRoICYmIHRyYWlsaW5nU2xhc2gpIHtcbiAgICBwYXRoICs9ICcvJztcbiAgfVxuICBcbiAgcmV0dXJuIChpc0Fic29sdXRlID8gJy8nIDogJycpICsgcGF0aDtcbn07XG5cblxuLy8gcG9zaXggdmVyc2lvblxuZXhwb3J0cy5qb2luID0gZnVuY3Rpb24oKSB7XG4gIHZhciBwYXRocyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gIHJldHVybiBleHBvcnRzLm5vcm1hbGl6ZShmaWx0ZXIocGF0aHMsIGZ1bmN0aW9uKHAsIGluZGV4KSB7XG4gICAgcmV0dXJuIHAgJiYgdHlwZW9mIHAgPT09ICdzdHJpbmcnO1xuICB9KS5qb2luKCcvJykpO1xufTtcblxuXG5leHBvcnRzLmRpcm5hbWUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHZhciBkaXIgPSBzcGxpdFBhdGhSZS5leGVjKHBhdGgpWzFdIHx8ICcnO1xuICB2YXIgaXNXaW5kb3dzID0gZmFsc2U7XG4gIGlmICghZGlyKSB7XG4gICAgLy8gTm8gZGlybmFtZVxuICAgIHJldHVybiAnLic7XG4gIH0gZWxzZSBpZiAoZGlyLmxlbmd0aCA9PT0gMSB8fFxuICAgICAgKGlzV2luZG93cyAmJiBkaXIubGVuZ3RoIDw9IDMgJiYgZGlyLmNoYXJBdCgxKSA9PT0gJzonKSkge1xuICAgIC8vIEl0IGlzIGp1c3QgYSBzbGFzaCBvciBhIGRyaXZlIGxldHRlciB3aXRoIGEgc2xhc2hcbiAgICByZXR1cm4gZGlyO1xuICB9IGVsc2Uge1xuICAgIC8vIEl0IGlzIGEgZnVsbCBkaXJuYW1lLCBzdHJpcCB0cmFpbGluZyBzbGFzaFxuICAgIHJldHVybiBkaXIuc3Vic3RyaW5nKDAsIGRpci5sZW5ndGggLSAxKTtcbiAgfVxufTtcblxuXG5leHBvcnRzLmJhc2VuYW1lID0gZnVuY3Rpb24ocGF0aCwgZXh0KSB7XG4gIHZhciBmID0gc3BsaXRQYXRoUmUuZXhlYyhwYXRoKVsyXSB8fCAnJztcbiAgLy8gVE9ETzogbWFrZSB0aGlzIGNvbXBhcmlzb24gY2FzZS1pbnNlbnNpdGl2ZSBvbiB3aW5kb3dzP1xuICBpZiAoZXh0ICYmIGYuc3Vic3RyKC0xICogZXh0Lmxlbmd0aCkgPT09IGV4dCkge1xuICAgIGYgPSBmLnN1YnN0cigwLCBmLmxlbmd0aCAtIGV4dC5sZW5ndGgpO1xuICB9XG4gIHJldHVybiBmO1xufTtcblxuXG5leHBvcnRzLmV4dG5hbWUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiBzcGxpdFBhdGhSZS5leGVjKHBhdGgpWzNdIHx8ICcnO1xufTtcblxuZXhwb3J0cy5yZWxhdGl2ZSA9IGZ1bmN0aW9uKGZyb20sIHRvKSB7XG4gIGZyb20gPSBleHBvcnRzLnJlc29sdmUoZnJvbSkuc3Vic3RyKDEpO1xuICB0byA9IGV4cG9ydHMucmVzb2x2ZSh0bykuc3Vic3RyKDEpO1xuXG4gIGZ1bmN0aW9uIHRyaW0oYXJyKSB7XG4gICAgdmFyIHN0YXJ0ID0gMDtcbiAgICBmb3IgKDsgc3RhcnQgPCBhcnIubGVuZ3RoOyBzdGFydCsrKSB7XG4gICAgICBpZiAoYXJyW3N0YXJ0XSAhPT0gJycpIGJyZWFrO1xuICAgIH1cblxuICAgIHZhciBlbmQgPSBhcnIubGVuZ3RoIC0gMTtcbiAgICBmb3IgKDsgZW5kID49IDA7IGVuZC0tKSB7XG4gICAgICBpZiAoYXJyW2VuZF0gIT09ICcnKSBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoc3RhcnQgPiBlbmQpIHJldHVybiBbXTtcbiAgICByZXR1cm4gYXJyLnNsaWNlKHN0YXJ0LCBlbmQgLSBzdGFydCArIDEpO1xuICB9XG5cbiAgdmFyIGZyb21QYXJ0cyA9IHRyaW0oZnJvbS5zcGxpdCgnLycpKTtcbiAgdmFyIHRvUGFydHMgPSB0cmltKHRvLnNwbGl0KCcvJykpO1xuXG4gIHZhciBsZW5ndGggPSBNYXRoLm1pbihmcm9tUGFydHMubGVuZ3RoLCB0b1BhcnRzLmxlbmd0aCk7XG4gIHZhciBzYW1lUGFydHNMZW5ndGggPSBsZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoZnJvbVBhcnRzW2ldICE9PSB0b1BhcnRzW2ldKSB7XG4gICAgICBzYW1lUGFydHNMZW5ndGggPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgdmFyIG91dHB1dFBhcnRzID0gW107XG4gIGZvciAodmFyIGkgPSBzYW1lUGFydHNMZW5ndGg7IGkgPCBmcm9tUGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBvdXRwdXRQYXJ0cy5wdXNoKCcuLicpO1xuICB9XG5cbiAgb3V0cHV0UGFydHMgPSBvdXRwdXRQYXJ0cy5jb25jYXQodG9QYXJ0cy5zbGljZShzYW1lUGFydHNMZW5ndGgpKTtcblxuICByZXR1cm4gb3V0cHV0UGFydHMuam9pbignLycpO1xufTtcblxufSkocmVxdWlyZShcIl9fYnJvd3NlcmlmeV9wcm9jZXNzXCIpKSIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS42LjJcbnZhciBhLCBhcnRpY2xlX2xpc3QsIGRhdGEsIGZzLCBsaXN0LCBwYXRoLCB2YWx1ZSwgXztcblxuZnMgPSByZXF1aXJlKFwiZnNcIik7XG5cbnBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcblxuYXJ0aWNsZV9saXN0ID0gW1wiLi9wb3N0cy9hYm91dC1jb2Rlci1uZXdzXCIsIFwiLi9wb3N0cy9mdXR1cmUtb2YtVUlcIiwgXCIuL3Bvc3RzL3doeS1jb2xsZWN0LWxpbmtzXCIsIFwiLi9wb3N0cy9sb3ZlLWxhbmd1YWdlc1wiLCBcIi4vcG9zdHMvam9pbi1jb21tdW5pdGllc1wiLCBcIi4vcG9zdHMvZXZlcnlvbmUtZ2V0cy1vbGRcIiwgXCIuL3Bvc3RzL3lvdS1hbmQtbWUtZGlmZmVyZW50XCIsIFwiLi9wb3N0cy9hYm91dC10aGlzLXNpdGVcIl07XG5cbmEgPSBcIi4vcG9zdHMvYWJvdXQtY29kZXItbmV3c1wiO1xuXG5yZXF1aXJlKGEpO1xuXG5kYXRhID0ge1xuICAwOiByZXF1aXJlKFwiLi9wb3N0cy9hYm91dC1jb2Rlci1uZXdzXCIpLFxuICAxOiByZXF1aXJlKFwiLi9wb3N0cy9mdXR1cmUtb2YtVUlcIiksXG4gIDI6IHJlcXVpcmUoXCIuL3Bvc3RzL3doeS1jb2xsZWN0LWxpbmtzXCIpLFxuICAzOiByZXF1aXJlKFwiLi9wb3N0cy9sb3ZlLWxhbmd1YWdlc1wiKSxcbiAgNDogcmVxdWlyZShcIi4vcG9zdHMvam9pbi1jb21tdW5pdGllc1wiKSxcbiAgNTogcmVxdWlyZShcIi4vcG9zdHMvZXZlcnlvbmUtZ2V0cy1vbGRcIiksXG4gIDY6IHJlcXVpcmUoXCIuL3Bvc3RzL3lvdS1hbmQtbWUtZGlmZmVyZW50XCIpLFxuICA3OiByZXF1aXJlKFwiLi9wb3N0cy9hYm91dC10aGlzLXNpdGVcIiksXG4gIDg6IHtcbiAgICB0aXRsZTogXCLmj5Dorq46IOaIkeS7rOWPmOmAmuS4iyBITiDnmoTmlrnlvI8sIOWcqCBHaXRodWIg5LiK5Yib5bu65LiA5Liq5oqA5pyv6K665Z2bXCIsXG4gICAgbGluazogXCJodHRwOi8vdjJleC5jb20vdC82NTQ3MlwiXG4gIH1cbn07XG5cbmxpc3QgPSAoZnVuY3Rpb24oKSB7XG4gIHZhciBfcmVzdWx0cztcblxuICBfcmVzdWx0cyA9IFtdO1xuICBmb3IgKF8gaW4gZGF0YSkge1xuICAgIHZhbHVlID0gZGF0YVtfXTtcbiAgICBfcmVzdWx0cy5wdXNoKHZhbHVlKTtcbiAgfVxuICByZXR1cm4gX3Jlc3VsdHM7XG59KSgpO1xuXG5leHBvcnRzLmJ5X3RpbWUgPSBsaXN0O1xuXG5leHBvcnRzLmJ5X3NvcnQgPSBsaXN0LmNvbmNhdCgpLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICBpZiAoYS50aXRsZSA+IGIudGl0bGUpIHtcbiAgICByZXR1cm4gMTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbn0pO1xuXG5jb25zb2xlLmxvZyhsaXN0KTtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS42LjJcbmV4cG9ydHMudGl0bGUgPSBcIuaIkeWPkeW4luiusuWFs+S6jiBDb2RlciBOZXdzIOi/meS4quWQjeWtl+eahOe7j+WOhlwiO1xuXG5leHBvcnRzLmNvbnRlbnQgPSBcIlwiO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuZXhwb3J0cy50aXRsZSA9IFwi5ryC5Lqu55qEIFVJIOaYr+e9kemhteWPkeWxleeahOaWueWQkVwiO1xuXG5leHBvcnRzLmNvbnRlbnQgPSBcIlwiO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuZXhwb3J0cy50aXRsZSA9IFwi57yW56iL6K+t6KiA55qE54ix5aW9LCDnmoTnlJ/mtLvmgIHluqZcIjtcblxuZXhwb3J0cy5jb250ZW50ID0gXCJcIjtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS42LjJcbmV4cG9ydHMudGl0bGUgPSBcIuiuqeS6uue+oeaFleeahOekvuWMulwiO1xuXG5leHBvcnRzLmNvbnRlbnQgPSBcIlwiO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuZXhwb3J0cy50aXRsZSA9IFwi5Lq65oC75piv6KaB6KGw6ICB55qELCDlj5jlvpflkozoh6rlt7Hmg7PnmoTkuI3kuIDmoLcsIOWPmOW+l+aIkOeGn1wiO1xuXG5leHBvcnRzLmNvbnRlbnQgPSBcIlwiO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuZXhwb3J0cy50aXRsZSA9IFwi5LiW55WM5LiK5pyJ55qE5Lq65by6LCDmnInnmoTkurrlvLEsIOS6i+aDheWwseaYr+i/meagt1wiO1xuXG5leHBvcnRzLmNvbnRlbnQgPSBcIlwiO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuZXhwb3J0cy50aXRsZSA9IFwi5YWz5LqO546w5Zyo6L+Z5Liq6aG16Z2iLCDkuLrku4DkuYjopoHmkK3lu7rov5nkuKrpobXpnaJcIjtcblxuZXhwb3J0cy5jb250ZW50ID0gXCLmmZrkuIrorqTnnJ/nnIvkuoblh6DkuKrnr4fmlrDpl7ssIOmDveaYryBTdGFydHVwIE5ld3Mg5LiK55qELCDmnInngrnooqvmiZPliqhcXG7mnKzmnaXlkIPov4fmmZrppa3lh7rpl6gsIOWwseacieenjeS4ieabtOWNiuWknOihjOi1sOWcqOWtpuagoeeahOS4jeWuieeahOaEn+inieS6hlxcbuaYj+aYj+ayieayieWcsOeci+edgOaWh+eroCwg6IGU5oOz5Yiw5LiA5LqbLCDlsLHlnKjkuIvovrnliqDor4TorrrlgZrmj5DnpLpcXG7nnIvliLAgVjJFWCDmia/ov4fnmoQgQEhpdDkg6ZO+5o6l6YO96KKr5pS+5Yiw5LiK6L655LqGLCDpqazkuIrmkJzliLAgR2l0aHViXFxu5LiA5oOzLCBTdGFydHVwIE5ld3Mg5LiK6K+E6K6655qE5Lq65aSq5bCR5LqGLCDkvp3nhLbmsqHmnInmlYjmnpzlkYBcXG5cXG7miJHnnIvnmoTlh6Dnr4fmlofnq6DlpJrlpJrlsJHlsJHmj5DliLDnpL7ljLosIOiAjOaIkeWvueatpOi2iuWPkeaEn+WIsOaGp+aGrOedgFxcbui/meaXtuWAmeecn+acieS6m+aXoOWliCwg5oOz5Yiw55WM6Z2i55qE6K6+6K6hLCDlsLHlpb3lg4/miorkuYvliY3msqHlgZrnmoTlgZrlh7rmnaVcXG7mmZrkuIrlv5nnnYDmkK3moYbmnrYsIOaWree7reS4gOS4quWkmuWwj+aXtiwgY29mZmVlIOeahOahhuaetuWfuuacrOWujOaIkOS6hlxcbuecvOeci+eOsOWcqOW3sue7j+i/h+S6huWHjOaZqCwg5oiR55yf5rKh5Yqb5rCU5YaN5a6J5b+D5oqY6IW+5LiL5Y67XFxu5pyJ5Lqb5LqL5oOF5Lya5piv5LiA5pe25Lyk5oSfLCDlhbTotbfljrvlgZosIOWFtOWwveiAjOatoiwg5biM5pyb6L+Z5LiN5pivXCI7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG5leHBvcnRzLnRpdGxlID0gXCLkuLrku4DkuYjopoHmkJzpm4botYTmupAsIOaUtumbhui1hOa6kOeahOW8iuerrywg5oiR5bqU6K+l5oCO5LmI5YGaXCI7XG5cbmV4cG9ydHMuY29udGVudCA9IFwiXCI7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG52YXIgYXV0aGVyLCBjc3MsIGh0bWwsIHEsIHJlbmRlcl90aXRsZSwgX3JlZjtcblxuX3JlZiA9IHJlcXVpcmUoXCJsaWx5dHVyZlwiKSwgaHRtbCA9IF9yZWYuaHRtbCwgY3NzID0gX3JlZi5jc3M7XG5cbnEgPSBmdW5jdGlvbihxdWVyeSkge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihxdWVyeSk7XG59O1xuXG5FbGVtZW50LnByb3RvdHlwZS5xID0gZnVuY3Rpb24ocXVlcnkpIHtcbiAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihxdWVyeSk7XG59O1xuXG5hdXRoZXIgPSB7XG4gIG5hbWU6IFwiaml5aW55aXlvbmdcIixcbiAgYXZhdGFyOiBcImh0dHA6Ly9waG90b3MudHVjaG9uZy5jb20vMTA4OTM0L2YvMjE1OTYyOS5qcGdcIlxufTtcblxucmVuZGVyX3RpdGxlID0gZnVuY3Rpb24ocG9zdCkge1xuICByZXR1cm4gaHRtbChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kaXYoe1xuICAgICAgXCJjbGFzc1wiOiBcInBvc3RcIlxuICAgIH0sIHRoaXMuaW1nKHtcbiAgICAgIFwiY2xhc3NcIjogXCJhdmF0YXJcIixcbiAgICAgIHNyYzogYXV0aGVyLmF2YXRhcixcbiAgICAgIHRpdGxlOiBhdXRoZXIubmFtZVxuICAgIH0pLCB0aGlzLmRpdih7XG4gICAgICBcImNsYXNzXCI6IFwiaXRlbVwiXG4gICAgfSwgdGhpcy5kaXYoe1xuICAgICAgXCJjbGFzc1wiOiBcInRpdGxlXCIsXG4gICAgICBkYXRhOiBwb3N0LmNvbnRlbnRcbiAgICB9LCBwb3N0LnRpdGxlKSwgdGhpcy5zcGFuKHtcbiAgICAgIFwiY2xhc3NcIjogXCJsaW5rXCJcbiAgICB9LCBwb3N0LmxpbmsgIT0gbnVsbCA/IHBvc3QubGluayA6IFwic2VsZlwiKSkpO1xuICB9KTtcbn07XG5cbmV4cG9ydHMucmVuZGVyX2xpc3QgPSBmdW5jdGlvbihwb3N0X2xpc3QpIHtcbiAgdmFyIGxpc3Q7XG5cbiAgbGlzdCA9IHEoXCIjbGlzdFwiKTtcbiAgcmV0dXJuIGxpc3QuaW5uZXJIVE1MID0gaHRtbChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kaXYoe1xuICAgICAgXCJjbGFzc1wiOiBcImNvbnRhaW5lclwiXG4gICAgfSwgcG9zdF9saXN0Lm1hcChyZW5kZXJfdGl0bGUpLmpvaW4oXCJcIikpO1xuICB9KTtcbn07XG5cbmV4cG9ydHMuYmluZF9saXN0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgdmFyIGxpc3Q7XG5cbiAgbGlzdCA9IHEoXCIjbGlzdFwiKTtcbiAgcmV0dXJuIGxpc3Qub25jbGljayA9IGNhbGxiYWNrO1xufTtcblxuZXhwb3J0cy5yZW5kZXJfcG9zdCA9IGZ1bmN0aW9uKHRhZykge1xuICBxKFwiI3RpdGxlXCIpLmlubmVyVGV4dCA9IHRhZy5pbm5lclRleHQ7XG4gIHEoXCIjY29udGVudFwiKS5pbm5lclRleHQgPSB0YWcuY29udGVudCB8fCBcIlwiO1xuICBpZiAodGFnLmxpbmspIHtcbiAgICBxKFwiLmxpbmtcIikuaW5uZXJUZXh0ID0gdGFnLmxpbms7XG4gICAgcmV0dXJuIHEoXCIubGlua1wiKS5ocmVmID0gXCJodHRwOi8vXCIgKyB0YWcubGluaztcbiAgfVxufTtcblxuZXhwb3J0cy5vcGVuX2xpbmsgPSBmdW5jdGlvbihsaW5rKSB7XG4gIGlmIChsaW5rLm1hdGNoKC9cXHdcXC5cXHcvKSkge1xuICAgIHJldHVybiB3aW5kb3cub3BlbihsaW5rKTtcbiAgfVxufTtcblxuZXhwb3J0cy5iaW5kX3RvcCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHJldHVybiBxKFwiLm1lbnUgLnRvcFwiKS5vbmNsaWNrID0gY2FsbGJhY2s7XG59O1xuXG5leHBvcnRzLmJpbmRfbmV3ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgcmV0dXJuIHEoXCIubWVudSAubmV3XCIpLm9uY2xpY2sgPSBjYWxsYmFjaztcbn07XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG52YXIgY3NzLCBjc3NfdG9vbHMsIGh0bWxfc2NvcGUsIGh0bWxfdG9vbHMsIHBhaXJfZWxlbXMsIHJlc29sdmUsIHNpbmdsZV9lbGVtcyxcbiAgX19zbGljZSA9IFtdLnNsaWNlO1xuXG5odG1sX3Njb3BlID0ge307XG5cbnBhaXJfZWxlbXMgPSBcImhlYWQgdGl0bGUgYm9keSBzY3JpcHQgIGRpdiBuYXYgaGVhZGVyIGZvb3RlciBzZWN0aW9uIGFydGljbGUgIHAgc3BhbiB0ZXh0YXJlYSBiciBwcmUgY29kZSBhIGFkZHJlc3MgYiBiYWNrcXVvdGUgIGJ1dHRvbiBmb250IGZyYW1lIGZvcm0gaHIgaSAgdWwgbGkgb2wgdGFibGUgdHIgdGQgdGggdGl0bGUgIGNhbnZhcyBhdWRpbyB2aWRlbyBzZWxlY3Qgc3R5bGVcIi5zcGxpdCgvXFxzKy8pO1xuXG5zaW5nbGVfZWxlbXMgPSBcImltZyBtZXRhIGlucHV0IGxpbmsgaWZyYW1lIGF1ZGlvIHZpZGVvXCIuc3BsaXQoL1xccysvKTtcblxuaHRtbF90b29scyA9IHtcbiAgYXR0cnM6IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBhdHRycywga2V5LCB2YWx1ZTtcblxuICAgIGF0dHJzID0gXCJcIjtcbiAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgIHZhbHVlID0gb2JqW2tleV07XG4gICAgICBhdHRycyArPSBcIiBcIiArIGtleSArIFwiPSdcIiArIHZhbHVlICsgXCInXCI7XG4gICAgfVxuICAgIHJldHVybiBhdHRycztcbiAgfSxcbiAgdGV4dDogZnVuY3Rpb24odGV4dCkge1xuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoLyYvZywgXCImYW1wO1wiKS5yZXBsYWNlKC88L2csIFwiJmx0O1wiKS5yZXBsYWNlKC8+L2csIFwiJmd0O1wiKS5yZXBsYWNlKC9cXHMvZywgXCImbmJzcDtcIik7XG4gIH1cbn07XG5cbnJlc29sdmUgPSBmdW5jdGlvbihsaXN0KSB7XG4gIHZhciBlbGVtLCBvYmo7XG5cbiAgb2JqID0ge307XG4gIGVsZW0gPSBbXTtcbiAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICB2YXIga2V5LCB0aGF0LCB2YWx1ZSwgX2ksIF9sZW4sIF9yZXN1bHRzLCBfcmVzdWx0czE7XG5cbiAgICBpZiAoaXRlbSAhPSBudWxsKSB7XG4gICAgICBpZiAoaXRlbS5fX3Byb3RvX18gPT09IE9iamVjdC5wcm90b3R5cGUpIHtcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChrZXkgaW4gaXRlbSkge1xuICAgICAgICAgIHZhbHVlID0gaXRlbVtrZXldO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2gob2JqW2tleV0gPSB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgfSBlbHNlIGlmIChpdGVtLl9fcHJvdG9fXyA9PT0gQXJyYXkucHJvdG90eXBlKSB7XG4gICAgICAgIF9yZXN1bHRzMSA9IFtdO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGl0ZW0ubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICB0aGF0ID0gaXRlbVtfaV07XG4gICAgICAgICAgX3Jlc3VsdHMxLnB1c2goZWxlbS5wdXNoKHRoYXQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHMxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGVsZW0ucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gW29iaiwgZWxlbV07XG59O1xuXG5wYWlyX2VsZW1zLm1hcChmdW5jdGlvbih0YWcpIHtcbiAgcmV0dXJuIGh0bWxfc2NvcGVbdGFnXSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsaXN0LCBvYmosIF9yZWY7XG5cbiAgICBsaXN0ID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gX19zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICBfcmVmID0gcmVzb2x2ZShsaXN0KSwgb2JqID0gX3JlZlswXSwgbGlzdCA9IF9yZWZbMV07XG4gICAgcmV0dXJuIFwiPFwiICsgdGFnICsgKGh0bWxfdG9vbHMuYXR0cnMob2JqKSkgKyBcIj5cIiArIChsaXN0LmpvaW4oXCJcIikpICsgXCI8L1wiICsgdGFnICsgXCI+XCI7XG4gIH07XG59KTtcblxuc2luZ2xlX2VsZW1zLm1hcChmdW5jdGlvbih0YWcpIHtcbiAgcmV0dXJuIGh0bWxfc2NvcGVbdGFnXSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkge1xuICAgICAgb2JqID0ge307XG4gICAgfVxuICAgIHJldHVybiBcIjxcIiArIHRhZyArIChodG1sX3Rvb2xzLmF0dHJzKG9iaikpICsgXCIvPlwiO1xuICB9O1xufSk7XG5cbmh0bWxfc2NvcGUuaHRtbCA9IGZ1bmN0aW9uKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nO1xufTtcblxuaHRtbF9zY29wZS50ZXh0ID0gaHRtbF90b29scy50ZXh0O1xuXG5jc3NfdG9vbHMgPSB7XG4gIHRlbXBsYXRlOiBmdW5jdGlvbihiYXNlLCBzZWxlY3RvciwgZGVjbGFyYXRpb24pIHtcbiAgICByZXR1cm4gXCJcIiArIGJhc2UgKyBcIiBcIiArIHNlbGVjdG9yICsgXCJ7XFxuXCIgKyBkZWNsYXJhdGlvbiArIFwiXFxufVxcblwiO1xuICB9LFxuICB1dGlsczoge1xuICAgIGhzbDogZnVuY3Rpb24oaCwgcywgbCkge1xuICAgICAgcmV0dXJuIFwiaHNsKFwiICsgaCArIFwiLCBcIiArIHMgKyBcIiUsIFwiICsgbCArIFwiJSlcIjtcbiAgICB9LFxuICAgIGhzbGE6IGZ1bmN0aW9uKGgsIHMsIGwsIGEpIHtcbiAgICAgIHJldHVybiBcImhzbChcIiArIGggKyBcIiwgXCIgKyBzICsgXCIlLCBcIiArIGwgKyBcIiUsIFwiICsgYSArIFwiKVwiO1xuICAgIH1cbiAgfSxcbiAgdHlwZTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgbWF0Y2gsIHN0cmluZztcblxuICAgIG1hdGNoID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5tYXRjaCgvXFxzXFx3Ky8pO1xuICAgIHN0cmluZyA9IG1hdGNoWzBdLnNsaWNlKDEpO1xuICAgIHJldHVybiBzdHJpbmcudG9Mb3dlckNhc2UoKTtcbiAgfSxcbiAgcHJldHR5OiBmdW5jdGlvbihjaGFyKSB7XG4gICAgaWYgKGNoYXIubWF0Y2goL15bQS1aXSQvKSAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gXCItXCIgKyBjaGFyLnRvTG93ZXJDYXNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjaGFyO1xuICAgIH1cbiAgfVxufTtcblxuY3NzID0gZnVuY3Rpb24oZ2VuZXJhdG9yKSB7XG4gIHZhciBkYXRhLCBzdHlsZSwgd3JpdGVfcnVsZTtcblxuICBzdHlsZSA9IFwiXCI7XG4gIGNzc190b29scy51dGlscy5nZW5lcmF0b3IgPSBnZW5lcmF0b3I7XG4gIGRhdGEgPSBjc3NfdG9vbHMudXRpbHMuZ2VuZXJhdG9yKCk7XG4gIHdyaXRlX3J1bGUgPSBmdW5jdGlvbihiYXNlLCBkYXRhKSB7XG4gICAgdmFyIGF0dHJpYnV0ZSwgZGVjbGFyYXRpb24sIG5lc3Rfc2VsZWN0b3IsIG5lc3RlZCwgcGxhaW4sIHJ1bGUsIHNlbGVjdG9yLCB2YWx1ZSwgdmFsdWVzLCBfaSwgX2xlbiwgX3Jlc3VsdHM7XG5cbiAgICBuZXN0ZWQgPSB7fTtcbiAgICBmb3IgKHNlbGVjdG9yIGluIGRhdGEpIHtcbiAgICAgIGRlY2xhcmF0aW9uID0gZGF0YVtzZWxlY3Rvcl07XG4gICAgICBwbGFpbiA9IFtdO1xuICAgICAgZm9yIChhdHRyaWJ1dGUgaW4gZGVjbGFyYXRpb24pIHtcbiAgICAgICAgdmFsdWUgPSBkZWNsYXJhdGlvblthdHRyaWJ1dGVdO1xuICAgICAgICBpZiAoKGNzc190b29scy50eXBlKHZhbHVlKSkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBuZXN0X3NlbGVjdG9yID0gXCJcIiArIGJhc2UgKyBcIiBcIiArIHNlbGVjdG9yO1xuICAgICAgICAgIGlmIChuZXN0ZWRbbmVzdF9zZWxlY3Rvcl0gPT0gbnVsbCkge1xuICAgICAgICAgICAgbmVzdGVkW25lc3Rfc2VsZWN0b3JdID0ge307XG4gICAgICAgICAgfVxuICAgICAgICAgIG5lc3RlZFtuZXN0X3NlbGVjdG9yXVthdHRyaWJ1dGVdID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXR0cmlidXRlID0gYXR0cmlidXRlLnNwbGl0KFwiXCIpLm1hcChjc3NfdG9vbHMucHJldHR5KS5qb2luKFwiXCIpO1xuICAgICAgICAgIGlmICgoY3NzX3Rvb2xzLnR5cGUodmFsdWUpKSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgdmFsdWUgPSBcIlwiICsgdmFsdWUgKyBcInB4XCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgoY3NzX3Rvb2xzLnR5cGUodmFsdWUpKSA9PT0gXCJhcnJheVwiKSB7XG4gICAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gdmFsdWVzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gdmFsdWVzW19pXTtcbiAgICAgICAgICAgICAgcGxhaW4ucHVzaChcIiAgXCIgKyBhdHRyaWJ1dGUgKyBcIjogXCIgKyB2YWx1ZSArIFwiO1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGxhaW4ucHVzaChcIiAgXCIgKyBhdHRyaWJ1dGUgKyBcIjogXCIgKyB2YWx1ZSArIFwiO1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwbGFpbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIGRlY2xhcmF0aW9uID0gcGxhaW4uam9pbihcIlxcblwiKTtcbiAgICAgICAgcnVsZSA9IGNzc190b29scy50ZW1wbGF0ZShiYXNlLCBzZWxlY3RvciwgZGVjbGFyYXRpb24pO1xuICAgICAgICBzdHlsZSArPSBydWxlLnRyaW1MZWZ0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICgoT2JqZWN0LmtleXMobmVzdGVkKSkubGVuZ3RoID4gMCkge1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoYmFzZSBpbiBuZXN0ZWQpIHtcbiAgICAgICAgZGF0YSA9IG5lc3RlZFtiYXNlXTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaCh3cml0ZV9ydWxlKGJhc2UsIGRhdGEpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9XG4gIH07XG4gIHdyaXRlX3J1bGUoXCJcIiwgZGF0YSk7XG4gIHJldHVybiBzdHlsZTtcbn07XG5cbmV4cG9ydHMuaHRtbCA9IGZ1bmN0aW9uKGdlbmVyYXRvcikge1xuICByZXR1cm4gZ2VuZXJhdG9yLmNhbGwoaHRtbF9zY29wZSk7XG59O1xuXG5leHBvcnRzLmNzcyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgcmV0dXJuIGNzcyhkYXRhKTtcbn07XG4iXX0=
;