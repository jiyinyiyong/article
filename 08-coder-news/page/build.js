;(function(e,t,n){function i(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(r)return r(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0](function(t){var r=e[n][1][t];return i(r?r:t)},u,u.exports)}return t[n].exports}var r=typeof require=="function"&&require;for(var s=0;s<n.length;s++)i(n[s]);return i})({1:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
var dom, post_list;

post_list = require("./data");

console.log(post_list);

dom = require("./dom");

window.onload = function() {
  dom.render_list(post_list.by_sort);
  dom.bind_top(function() {
    return dom.render_list(post_list.by_sort);
  });
  dom.bind_new(function() {
    return dom.render_list(post_list.by_time);
  });
  dom.bind_back(function() {
    return dom.hide_post();
  });
  dom.bind_list(function(event) {
    var tag;

    tag = event.target;
    switch (tag.className) {
      case "title":
        return dom.render_post(tag);
      case "link":
        return dom.open_link(tag.innerText);
    }
  });
  return dom.test();
};

},{"./data":2,"./dom":3}],4:[function(require,module,exports){
// nothing to see here... no file methods for the browser

},{}],5:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};

process.nextTick = (function () {
    var canSetImmediate = typeof window !== 'undefined'
    && window.setImmediate;
    var canPost = typeof window !== 'undefined'
    && window.postMessage && window.addEventListener
    ;

    if (canSetImmediate) {
        return function (f) { return window.setImmediate(f) };
    }

    if (canPost) {
        var queue = [];
        window.addEventListener('message', function (ev) {
            if (ev.source === window && ev.data === 'process-tick') {
                ev.stopPropagation();
                if (queue.length > 0) {
                    var fn = queue.shift();
                    fn();
                }
            }
        }, true);

        return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
        };
    }

    return function nextTick(fn) {
        setTimeout(fn, 0);
    };
})();

process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];

process.binding = function (name) {
    throw new Error('process.binding is not supported');
}

// TODO(shtylman)
process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};

},{}],6:[function(require,module,exports){
(function(process){function filter (xs, fn) {
    var res = [];
    for (var i = 0; i < xs.length; i++) {
        if (fn(xs[i], i, xs)) res.push(xs[i]);
    }
    return res;
}

// resolves . and .. elements in a path array with directory names there
// must be no slashes, empty elements, or device names (c:\) in the array
// (so also no leading and trailing slashes - it does not distinguish
// relative and absolute paths)
function normalizeArray(parts, allowAboveRoot) {
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = parts.length; i >= 0; i--) {
    var last = parts[i];
    if (last == '.') {
      parts.splice(i, 1);
    } else if (last === '..') {
      parts.splice(i, 1);
      up++;
    } else if (up) {
      parts.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (allowAboveRoot) {
    for (; up--; up) {
      parts.unshift('..');
    }
  }

  return parts;
}

// Regex to split a filename into [*, dir, basename, ext]
// posix version
var splitPathRe = /^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;

// path.resolve([from ...], to)
// posix version
exports.resolve = function() {
var resolvedPath = '',
    resolvedAbsolute = false;

for (var i = arguments.length; i >= -1 && !resolvedAbsolute; i--) {
  var path = (i >= 0)
      ? arguments[i]
      : process.cwd();

  // Skip empty and invalid entries
  if (typeof path !== 'string' || !path) {
    continue;
  }

  resolvedPath = path + '/' + resolvedPath;
  resolvedAbsolute = path.charAt(0) === '/';
}

// At this point the path should be resolved to a full absolute path, but
// handle relative paths to be safe (might happen when process.cwd() fails)

// Normalize the path
resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {
    return !!p;
  }), !resolvedAbsolute).join('/');

  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';
};

// path.normalize(path)
// posix version
exports.normalize = function(path) {
var isAbsolute = path.charAt(0) === '/',
    trailingSlash = path.slice(-1) === '/';

// Normalize the path
path = normalizeArray(filter(path.split('/'), function(p) {
    return !!p;
  }), !isAbsolute).join('/');

  if (!path && !isAbsolute) {
    path = '.';
  }
  if (path && trailingSlash) {
    path += '/';
  }
  
  return (isAbsolute ? '/' : '') + path;
};


// posix version
exports.join = function() {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(filter(paths, function(p, index) {
    return p && typeof p === 'string';
  }).join('/'));
};


exports.dirname = function(path) {
  var dir = splitPathRe.exec(path)[1] || '';
  var isWindows = false;
  if (!dir) {
    // No dirname
    return '.';
  } else if (dir.length === 1 ||
      (isWindows && dir.length <= 3 && dir.charAt(1) === ':')) {
    // It is just a slash or a drive letter with a slash
    return dir;
  } else {
    // It is a full dirname, strip trailing slash
    return dir.substring(0, dir.length - 1);
  }
};


exports.basename = function(path, ext) {
  var f = splitPathRe.exec(path)[2] || '';
  // TODO: make this comparison case-insensitive on windows?
  if (ext && f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
};


exports.extname = function(path) {
  return splitPathRe.exec(path)[3] || '';
};

exports.relative = function(from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start < arr.length; start++) {
      if (arr[start] !== '') break;
    }

    var end = arr.length - 1;
    for (; end >= 0; end--) {
      if (arr[end] !== '') break;
    }

    if (start > end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split('/'));
  var toParts = trim(to.split('/'));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i < length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i < fromParts.length; i++) {
    outputParts.push('..');
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join('/');
};

})(require("__browserify_process"))
},{"__browserify_process":5}],2:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
var a, article_list, data, fs, list, path, value, _;

fs = require("fs");

path = require("path");

article_list = ["./posts/about-coder-news", "./posts/future-of-UI", "./posts/why-collect-links", "./posts/love-languages", "./posts/join-communities", "./posts/everyone-gets-old", "./posts/you-and-me-different", "./posts/about-this-site"];

a = "./posts/about-coder-news";

require(a);

data = {
  0: require("./posts/about-coder-news"),
  1: require("./posts/future-of-UI"),
  2: require("./posts/why-collect-links"),
  3: require("./posts/love-languages"),
  4: require("./posts/join-communities"),
  5: require("./posts/everyone-gets-old"),
  6: require("./posts/you-and-me-different"),
  7: require("./posts/about-this-site"),
  8: {
    title: "提议: 我们变通下 HN 的方式, 在 Github 上创建一个技术论坛",
    link: "http://v2ex.com/t/65472",
    image: "http://designbycoffee.com/wp-content/uploads/2012/04/hn.jpg"
  }
};

list = (function() {
  var _results;

  _results = [];
  for (_ in data) {
    value = data[_];
    _results.push(value);
  }
  return _results;
})();

exports.by_time = list;

exports.by_sort = list.concat().sort(function(a, b) {
  if (a.title > b.title) {
    return 1;
  } else {
    return -1;
  }
});

console.log(list);

},{"fs":4,"path":6,"./posts/love-languages":7,"./posts/future-of-UI":8,"./posts/why-collect-links":9,"./posts/join-communities":10,"./posts/everyone-gets-old":11,"./posts/about-coder-news":12,"./posts/you-and-me-different":13,"./posts/about-this-site":14}],7:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "编程语言的爱好, 的生活态度";

exports.image = "http://photos.tuchong.com/109134/f/2354307.jpg";

exports.content = "";

},{}],8:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "漂亮的 UI 是网页发展的方向";

exports.image = "http://photos.tuchong.com/48548/f/2057678.jpg";

exports.content = "";

},{}],9:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "为什么要搜集资源, 收集资源的弊端, 我应该怎么做";

exports.image = "http://photos.tuchong.com/43976/f/1540115.jpg";

exports.content = "";

},{}],10:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "让人羡慕的社区";

exports.image = "http://photos.tuchong.com/240626/f/2994252.jpg";

exports.content = "";

},{}],11:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "人总是要衰老的, 变得和自己想的不一样, 变得成熟";

exports.image = "http://photos.tuchong.com/62404/f/1761064.jpg";

exports.content = "";

},{}],13:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "世界上有的人强, 有的人弱, 事情就是这样";

exports.image = "http://photos.tuchong.com/30795/f/769671.jpg";

exports.content = "";

},{}],12:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "我发帖讲关于 Coder News 这个名字的经历";

exports.image = "http://photos.tuchong.com/38538/f/2202641.jpg";

exports.content = "";

},{}],14:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
exports.title = "关于现在这个页面, 为什么要搭建这个页面";

exports.image = "http://photos.tuchong.com/42760/f/2243790.jpg";

exports.content = "晚上认真看了几个篇新闻, 都是 Startup News 上的, 有点被打动\n本来吃过晚饭出门, 就有种三更半夜行走在学校的不安的感觉了\n昏昏沉沉地看着文章, 联想到一些, 就在下边加评论做提示\n看到 V2EX 扯过的 @Hit9 链接都被放到上边了, 马上搜到 Github\n一想, Startup News 上评论的人太少了, 依然没有效果呀\n\n我看的几篇文章多多少少提到社区, 而我对此越发感到憧憬着\n这时候真有些无奈, 想到界面的设计, 就好像把之前没做的做出来\n晚上忙着搭框架, 断续一个多小时, coffee 的框架基本完成了\n眼看现在已经过了凌晨, 我真没力气再安心折腾下去\n有些事情会是一时伤感, 兴起去做, 兴尽而止, 希望这不是";

},{}],3:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
var auther, css, delay, hide_post, html, q, render_title, show_post, _ref;

_ref = require("lilyturf"), html = _ref.html, css = _ref.css;

q = function(query) {
  return document.querySelector(query);
};

Element.prototype.q = function(query) {
  return this.querySelector(query);
};

auther = {
  name: "jiyinyiyong",
  avatar: "http://photos.tuchong.com/108934/f/2159629.jpg"
};

render_title = function(post) {
  return html(function() {
    return this.div({
      "class": "post"
    }, this.img({
      "class": "avatar",
      src: auther.avatar,
      title: auther.name
    }), this.div({
      "class": "item"
    }, this.div({
      "class": "title",
      data: post.content,
      image: post.image
    }, post.title), this.span({
      "class": "link"
    }, post.link != null ? post.link : "@")));
  });
};

show_post = function() {
  var post;

  post = q("#post");
  post.style.height = "100%";
  return post.style.opacity = "1";
};

delay = function(t, f) {
  return setTimeout(f, t);
};

hide_post = function() {
  post.q("#post");
  delay(400, function() {
    return post.style.height = "0%";
  });
  return post.style.opacity = "0";
};

exports.render_list = function(post_list) {
  var list;

  list = q("#list");
  return list.innerHTML = html(function() {
    return this.div({
      "class": "container"
    }, post_list.map(render_title).join(""));
  });
};

exports.bind_list = function(callback) {
  var list;

  list = q("#list");
  return list.onclick = callback;
};

exports.render_post = function(tag) {
  var image;

  show_post();
  q("#title").innerText = tag.innerText;
  q("#content").innerText = tag.getAttribute("content") || "";
  image = tag.getAttribute("image");
  q("#post").style.backgroundImage = "url(" + image + ")";
  if (tag.link) {
    q(".link").innerText = tag.link;
    return q(".link").href = "http://" + tag.link;
  }
};

exports.open_link = function(link) {
  if (link.match(/\w\.\w/)) {
    return window.open(link);
  }
};

exports.bind_top = function(callback) {
  return q(".menu .top").onclick = callback;
};

exports.bind_new = function(callback) {
  return q(".menu .new").onclick = callback;
};

exports.bind_back = function(callback) {
  return q("#back").onclick = callback;
};

exports.hide_post = function() {
  return hide_post();
};

exports.test = function() {
  return delay(0, function() {
    return q("#list .post .title").click();
  });
};

},{"lilyturf":15}],15:[function(require,module,exports){
// Generated by CoffeeScript 1.6.2
var css, css_tools, html_scope, html_tools, pair_elems, resolve, single_elems,
  __slice = [].slice;

html_scope = {};

pair_elems = "head title body script  div nav header footer section article  p span textarea br pre code a address b backquote  button font frame form hr i  ul li ol table tr td th title  canvas audio video select style".split(/\s+/);

single_elems = "img meta input link iframe audio video".split(/\s+/);

html_tools = {
  attrs: function(obj) {
    var attrs, key, value;

    attrs = "";
    for (key in obj) {
      value = obj[key];
      attrs += " " + key + "='" + value + "'";
    }
    return attrs;
  },
  text: function(text) {
    return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\s/g, "&nbsp;");
  }
};

resolve = function(list) {
  var elem, obj;

  obj = {};
  elem = [];
  list.forEach(function(item) {
    var key, that, value, _i, _len, _results, _results1;

    if (item != null) {
      if (item.__proto__ === Object.prototype) {
        _results = [];
        for (key in item) {
          value = item[key];
          _results.push(obj[key] = value);
        }
        return _results;
      } else if (item.__proto__ === Array.prototype) {
        _results1 = [];
        for (_i = 0, _len = item.length; _i < _len; _i++) {
          that = item[_i];
          _results1.push(elem.push(that));
        }
        return _results1;
      } else {
        return elem.push(item);
      }
    }
  });
  return [obj, elem];
};

pair_elems.map(function(tag) {
  return html_scope[tag] = function() {
    var list, obj, _ref;

    list = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    _ref = resolve(list), obj = _ref[0], list = _ref[1];
    return "<" + tag + (html_tools.attrs(obj)) + ">" + (list.join("")) + "</" + tag + ">";
  };
});

single_elems.map(function(tag) {
  return html_scope[tag] = function(obj) {
    if (obj == null) {
      obj = {};
    }
    return "<" + tag + (html_tools.attrs(obj)) + "/>";
  };
});

html_scope.html = function(string) {
  return string;
};

html_scope.text = html_tools.text;

css_tools = {
  template: function(base, selector, declaration) {
    return "" + base + " " + selector + "{\n" + declaration + "\n}\n";
  },
  utils: {
    hsl: function(h, s, l) {
      return "hsl(" + h + ", " + s + "%, " + l + "%)";
    },
    hsla: function(h, s, l, a) {
      return "hsl(" + h + ", " + s + "%, " + l + "%, " + a + ")";
    }
  },
  type: function(value) {
    var match, string;

    match = Object.prototype.toString.call(value).match(/\s\w+/);
    string = match[0].slice(1);
    return string.toLowerCase();
  },
  pretty: function(char) {
    if (char.match(/^[A-Z]$/) != null) {
      return "-" + char.toLowerCase();
    } else {
      return char;
    }
  }
};

css = function(generator) {
  var data, style, write_rule;

  style = "";
  css_tools.utils.generator = generator;
  data = css_tools.utils.generator();
  write_rule = function(base, data) {
    var attribute, declaration, nest_selector, nested, plain, rule, selector, value, values, _i, _len, _results;

    nested = {};
    for (selector in data) {
      declaration = data[selector];
      plain = [];
      for (attribute in declaration) {
        value = declaration[attribute];
        if ((css_tools.type(value)) === "object") {
          nest_selector = "" + base + " " + selector;
          if (nested[nest_selector] == null) {
            nested[nest_selector] = {};
          }
          nested[nest_selector][attribute] = value;
        } else {
          attribute = attribute.split("").map(css_tools.pretty).join("");
          if ((css_tools.type(value)) === "number") {
            value = "" + value + "px";
          }
          if ((css_tools.type(value)) === "array") {
            values = value;
            for (_i = 0, _len = values.length; _i < _len; _i++) {
              value = values[_i];
              plain.push("  " + attribute + ": " + value + ";");
            }
          } else {
            plain.push("  " + attribute + ": " + value + ";");
          }
        }
      }
      if (plain.length > 0) {
        declaration = plain.join("\n");
        rule = css_tools.template(base, selector, declaration);
        style += rule.trimLeft();
      }
    }
    if ((Object.keys(nested)).length > 0) {
      _results = [];
      for (base in nested) {
        data = nested[base];
        _results.push(write_rule(base, data));
      }
      return _results;
    }
  };
  write_rule("", data);
  return style;
};

exports.html = function(generator) {
  return generator.call(html_scope);
};

exports.css = function(data) {
  return css(data);
};

},{}]},{},[1])
//@ sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvb3B0L3MvYXJ0aWNsZS8wOC1jb2Rlci1uZXdzL2xpYi9tYWluLmpzIiwiL3Vzci9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcmVzb2x2ZS9idWlsdGluL2ZzLmpzIiwiL3Vzci9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2luc2VydC1tb2R1bGUtZ2xvYmFscy9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwiL3Vzci9saWIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcmVzb2x2ZS9idWlsdGluL3BhdGguanMiLCIvb3B0L3MvYXJ0aWNsZS8wOC1jb2Rlci1uZXdzL2xpYi9kYXRhLmpzIiwiL29wdC9zL2FydGljbGUvMDgtY29kZXItbmV3cy9saWIvcG9zdHMvbG92ZS1sYW5ndWFnZXMuanMiLCIvb3B0L3MvYXJ0aWNsZS8wOC1jb2Rlci1uZXdzL2xpYi9wb3N0cy9mdXR1cmUtb2YtVUkuanMiLCIvb3B0L3MvYXJ0aWNsZS8wOC1jb2Rlci1uZXdzL2xpYi9wb3N0cy93aHktY29sbGVjdC1saW5rcy5qcyIsIi9vcHQvcy9hcnRpY2xlLzA4LWNvZGVyLW5ld3MvbGliL3Bvc3RzL2pvaW4tY29tbXVuaXRpZXMuanMiLCIvb3B0L3MvYXJ0aWNsZS8wOC1jb2Rlci1uZXdzL2xpYi9wb3N0cy9ldmVyeW9uZS1nZXRzLW9sZC5qcyIsIi9vcHQvcy9hcnRpY2xlLzA4LWNvZGVyLW5ld3MvbGliL3Bvc3RzL3lvdS1hbmQtbWUtZGlmZmVyZW50LmpzIiwiL29wdC9zL2FydGljbGUvMDgtY29kZXItbmV3cy9saWIvcG9zdHMvYWJvdXQtY29kZXItbmV3cy5qcyIsIi9vcHQvcy9hcnRpY2xlLzA4LWNvZGVyLW5ld3MvbGliL3Bvc3RzL2Fib3V0LXRoaXMtc2l0ZS5qcyIsIi9vcHQvcy9hcnRpY2xlLzA4LWNvZGVyLW5ld3MvbGliL2RvbS5qcyIsIi9vcHQvcy9hcnRpY2xlLzA4LWNvZGVyLW5ld3Mvbm9kZV9tb2R1bGVzL2xpbHl0dXJmL2xpbHl0dXJmLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQ0E7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNySEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxudmFyIGRvbSwgcG9zdF9saXN0O1xuXG5wb3N0X2xpc3QgPSByZXF1aXJlKFwiLi9kYXRhXCIpO1xuXG5jb25zb2xlLmxvZyhwb3N0X2xpc3QpO1xuXG5kb20gPSByZXF1aXJlKFwiLi9kb21cIik7XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgZG9tLnJlbmRlcl9saXN0KHBvc3RfbGlzdC5ieV9zb3J0KTtcbiAgZG9tLmJpbmRfdG9wKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkb20ucmVuZGVyX2xpc3QocG9zdF9saXN0LmJ5X3NvcnQpO1xuICB9KTtcbiAgZG9tLmJpbmRfbmV3KGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBkb20ucmVuZGVyX2xpc3QocG9zdF9saXN0LmJ5X3RpbWUpO1xuICB9KTtcbiAgZG9tLmJpbmRfYmFjayhmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZG9tLmhpZGVfcG9zdCgpO1xuICB9KTtcbiAgZG9tLmJpbmRfbGlzdChmdW5jdGlvbihldmVudCkge1xuICAgIHZhciB0YWc7XG5cbiAgICB0YWcgPSBldmVudC50YXJnZXQ7XG4gICAgc3dpdGNoICh0YWcuY2xhc3NOYW1lKSB7XG4gICAgICBjYXNlIFwidGl0bGVcIjpcbiAgICAgICAgcmV0dXJuIGRvbS5yZW5kZXJfcG9zdCh0YWcpO1xuICAgICAgY2FzZSBcImxpbmtcIjpcbiAgICAgICAgcmV0dXJuIGRvbS5vcGVuX2xpbmsodGFnLmlubmVyVGV4dCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGRvbS50ZXN0KCk7XG59O1xuIiwiLy8gbm90aGluZyB0byBzZWUgaGVyZS4uLiBubyBmaWxlIG1ldGhvZHMgZm9yIHRoZSBicm93c2VyXG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG5wcm9jZXNzLm5leHRUaWNrID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2FuU2V0SW1tZWRpYXRlID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAmJiB3aW5kb3cuc2V0SW1tZWRpYXRlO1xuICAgIHZhciBjYW5Qb3N0ID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAmJiB3aW5kb3cucG9zdE1lc3NhZ2UgJiYgd2luZG93LmFkZEV2ZW50TGlzdGVuZXJcbiAgICA7XG5cbiAgICBpZiAoY2FuU2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZikgeyByZXR1cm4gd2luZG93LnNldEltbWVkaWF0ZShmKSB9O1xuICAgIH1cblxuICAgIGlmIChjYW5Qb3N0KSB7XG4gICAgICAgIHZhciBxdWV1ZSA9IFtdO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgaWYgKGV2LnNvdXJjZSA9PT0gd2luZG93ICYmIGV2LmRhdGEgPT09ICdwcm9jZXNzLXRpY2snKSB7XG4gICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRydWUpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBuZXh0VGljayhmbikge1xuICAgICAgICAgICAgcXVldWUucHVzaChmbik7XG4gICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UoJ3Byb2Nlc3MtdGljaycsICcqJyk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZm4sIDApO1xuICAgIH07XG59KSgpO1xuXG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59XG5cbi8vIFRPRE8oc2h0eWxtYW4pXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbiIsIihmdW5jdGlvbihwcm9jZXNzKXtmdW5jdGlvbiBmaWx0ZXIgKHhzLCBmbikge1xuICAgIHZhciByZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChmbih4c1tpXSwgaSwgeHMpKSByZXMucHVzaCh4c1tpXSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5cbi8vIHJlc29sdmVzIC4gYW5kIC4uIGVsZW1lbnRzIGluIGEgcGF0aCBhcnJheSB3aXRoIGRpcmVjdG9yeSBuYW1lcyB0aGVyZVxuLy8gbXVzdCBiZSBubyBzbGFzaGVzLCBlbXB0eSBlbGVtZW50cywgb3IgZGV2aWNlIG5hbWVzIChjOlxcKSBpbiB0aGUgYXJyYXlcbi8vIChzbyBhbHNvIG5vIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMgLSBpdCBkb2VzIG5vdCBkaXN0aW5ndWlzaFxuLy8gcmVsYXRpdmUgYW5kIGFic29sdXRlIHBhdGhzKVxuZnVuY3Rpb24gbm9ybWFsaXplQXJyYXkocGFydHMsIGFsbG93QWJvdmVSb290KSB7XG4gIC8vIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBwYXJ0cy5sZW5ndGg7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIGxhc3QgPSBwYXJ0c1tpXTtcbiAgICBpZiAobGFzdCA9PSAnLicpIHtcbiAgICAgIHBhcnRzLnNwbGljZShpLCAxKTtcbiAgICB9IGVsc2UgaWYgKGxhc3QgPT09ICcuLicpIHtcbiAgICAgIHBhcnRzLnNwbGljZShpLCAxKTtcbiAgICAgIHVwKys7XG4gICAgfSBlbHNlIGlmICh1cCkge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgICAgdXAtLTtcbiAgICB9XG4gIH1cblxuICAvLyBpZiB0aGUgcGF0aCBpcyBhbGxvd2VkIHRvIGdvIGFib3ZlIHRoZSByb290LCByZXN0b3JlIGxlYWRpbmcgLi5zXG4gIGlmIChhbGxvd0Fib3ZlUm9vdCkge1xuICAgIGZvciAoOyB1cC0tOyB1cCkge1xuICAgICAgcGFydHMudW5zaGlmdCgnLi4nKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcGFydHM7XG59XG5cbi8vIFJlZ2V4IHRvIHNwbGl0IGEgZmlsZW5hbWUgaW50byBbKiwgZGlyLCBiYXNlbmFtZSwgZXh0XVxuLy8gcG9zaXggdmVyc2lvblxudmFyIHNwbGl0UGF0aFJlID0gL14oLitcXC8oPyEkKXxcXC8pPygoPzouKz8pPyhcXC5bXi5dKik/KSQvO1xuXG4vLyBwYXRoLnJlc29sdmUoW2Zyb20gLi4uXSwgdG8pXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLnJlc29sdmUgPSBmdW5jdGlvbigpIHtcbnZhciByZXNvbHZlZFBhdGggPSAnJyxcbiAgICByZXNvbHZlZEFic29sdXRlID0gZmFsc2U7XG5cbmZvciAodmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoOyBpID49IC0xICYmICFyZXNvbHZlZEFic29sdXRlOyBpLS0pIHtcbiAgdmFyIHBhdGggPSAoaSA+PSAwKVxuICAgICAgPyBhcmd1bWVudHNbaV1cbiAgICAgIDogcHJvY2Vzcy5jd2QoKTtcblxuICAvLyBTa2lwIGVtcHR5IGFuZCBpbnZhbGlkIGVudHJpZXNcbiAgaWYgKHR5cGVvZiBwYXRoICE9PSAnc3RyaW5nJyB8fCAhcGF0aCkge1xuICAgIGNvbnRpbnVlO1xuICB9XG5cbiAgcmVzb2x2ZWRQYXRoID0gcGF0aCArICcvJyArIHJlc29sdmVkUGF0aDtcbiAgcmVzb2x2ZWRBYnNvbHV0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLyc7XG59XG5cbi8vIEF0IHRoaXMgcG9pbnQgdGhlIHBhdGggc2hvdWxkIGJlIHJlc29sdmVkIHRvIGEgZnVsbCBhYnNvbHV0ZSBwYXRoLCBidXRcbi8vIGhhbmRsZSByZWxhdGl2ZSBwYXRocyB0byBiZSBzYWZlIChtaWdodCBoYXBwZW4gd2hlbiBwcm9jZXNzLmN3ZCgpIGZhaWxzKVxuXG4vLyBOb3JtYWxpemUgdGhlIHBhdGhcbnJlc29sdmVkUGF0aCA9IG5vcm1hbGl6ZUFycmF5KGZpbHRlcihyZXNvbHZlZFBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhcmVzb2x2ZWRBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIHJldHVybiAoKHJlc29sdmVkQWJzb2x1dGUgPyAnLycgOiAnJykgKyByZXNvbHZlZFBhdGgpIHx8ICcuJztcbn07XG5cbi8vIHBhdGgubm9ybWFsaXplKHBhdGgpXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbnZhciBpc0Fic29sdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyxcbiAgICB0cmFpbGluZ1NsYXNoID0gcGF0aC5zbGljZSgtMSkgPT09ICcvJztcblxuLy8gTm9ybWFsaXplIHRoZSBwYXRoXG5wYXRoID0gbm9ybWFsaXplQXJyYXkoZmlsdGVyKHBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhaXNBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIGlmICghcGF0aCAmJiAhaXNBYnNvbHV0ZSkge1xuICAgIHBhdGggPSAnLic7XG4gIH1cbiAgaWYgKHBhdGggJiYgdHJhaWxpbmdTbGFzaCkge1xuICAgIHBhdGggKz0gJy8nO1xuICB9XG4gIFxuICByZXR1cm4gKGlzQWJzb2x1dGUgPyAnLycgOiAnJykgKyBwYXRoO1xufTtcblxuXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLmpvaW4gPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhdGhzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgcmV0dXJuIGV4cG9ydHMubm9ybWFsaXplKGZpbHRlcihwYXRocywgZnVuY3Rpb24ocCwgaW5kZXgpIHtcbiAgICByZXR1cm4gcCAmJiB0eXBlb2YgcCA9PT0gJ3N0cmluZyc7XG4gIH0pLmpvaW4oJy8nKSk7XG59O1xuXG5cbmV4cG9ydHMuZGlybmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIGRpciA9IHNwbGl0UGF0aFJlLmV4ZWMocGF0aClbMV0gfHwgJyc7XG4gIHZhciBpc1dpbmRvd3MgPSBmYWxzZTtcbiAgaWYgKCFkaXIpIHtcbiAgICAvLyBObyBkaXJuYW1lXG4gICAgcmV0dXJuICcuJztcbiAgfSBlbHNlIGlmIChkaXIubGVuZ3RoID09PSAxIHx8XG4gICAgICAoaXNXaW5kb3dzICYmIGRpci5sZW5ndGggPD0gMyAmJiBkaXIuY2hhckF0KDEpID09PSAnOicpKSB7XG4gICAgLy8gSXQgaXMganVzdCBhIHNsYXNoIG9yIGEgZHJpdmUgbGV0dGVyIHdpdGggYSBzbGFzaFxuICAgIHJldHVybiBkaXI7XG4gIH0gZWxzZSB7XG4gICAgLy8gSXQgaXMgYSBmdWxsIGRpcm5hbWUsIHN0cmlwIHRyYWlsaW5nIHNsYXNoXG4gICAgcmV0dXJuIGRpci5zdWJzdHJpbmcoMCwgZGlyLmxlbmd0aCAtIDEpO1xuICB9XG59O1xuXG5cbmV4cG9ydHMuYmFzZW5hbWUgPSBmdW5jdGlvbihwYXRoLCBleHQpIHtcbiAgdmFyIGYgPSBzcGxpdFBhdGhSZS5leGVjKHBhdGgpWzJdIHx8ICcnO1xuICAvLyBUT0RPOiBtYWtlIHRoaXMgY29tcGFyaXNvbiBjYXNlLWluc2Vuc2l0aXZlIG9uIHdpbmRvd3M/XG4gIGlmIChleHQgJiYgZi5zdWJzdHIoLTEgKiBleHQubGVuZ3RoKSA9PT0gZXh0KSB7XG4gICAgZiA9IGYuc3Vic3RyKDAsIGYubGVuZ3RoIC0gZXh0Lmxlbmd0aCk7XG4gIH1cbiAgcmV0dXJuIGY7XG59O1xuXG5cbmV4cG9ydHMuZXh0bmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuIHNwbGl0UGF0aFJlLmV4ZWMocGF0aClbM10gfHwgJyc7XG59O1xuXG5leHBvcnRzLnJlbGF0aXZlID0gZnVuY3Rpb24oZnJvbSwgdG8pIHtcbiAgZnJvbSA9IGV4cG9ydHMucmVzb2x2ZShmcm9tKS5zdWJzdHIoMSk7XG4gIHRvID0gZXhwb3J0cy5yZXNvbHZlKHRvKS5zdWJzdHIoMSk7XG5cbiAgZnVuY3Rpb24gdHJpbShhcnIpIHtcbiAgICB2YXIgc3RhcnQgPSAwO1xuICAgIGZvciAoOyBzdGFydCA8IGFyci5sZW5ndGg7IHN0YXJ0KyspIHtcbiAgICAgIGlmIChhcnJbc3RhcnRdICE9PSAnJykgYnJlYWs7XG4gICAgfVxuXG4gICAgdmFyIGVuZCA9IGFyci5sZW5ndGggLSAxO1xuICAgIGZvciAoOyBlbmQgPj0gMDsgZW5kLS0pIHtcbiAgICAgIGlmIChhcnJbZW5kXSAhPT0gJycpIGJyZWFrO1xuICAgIH1cblxuICAgIGlmIChzdGFydCA+IGVuZCkgcmV0dXJuIFtdO1xuICAgIHJldHVybiBhcnIuc2xpY2Uoc3RhcnQsIGVuZCAtIHN0YXJ0ICsgMSk7XG4gIH1cblxuICB2YXIgZnJvbVBhcnRzID0gdHJpbShmcm9tLnNwbGl0KCcvJykpO1xuICB2YXIgdG9QYXJ0cyA9IHRyaW0odG8uc3BsaXQoJy8nKSk7XG5cbiAgdmFyIGxlbmd0aCA9IE1hdGgubWluKGZyb21QYXJ0cy5sZW5ndGgsIHRvUGFydHMubGVuZ3RoKTtcbiAgdmFyIHNhbWVQYXJ0c0xlbmd0aCA9IGxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmIChmcm9tUGFydHNbaV0gIT09IHRvUGFydHNbaV0pIHtcbiAgICAgIHNhbWVQYXJ0c0xlbmd0aCA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICB2YXIgb3V0cHV0UGFydHMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IHNhbWVQYXJ0c0xlbmd0aDsgaSA8IGZyb21QYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgIG91dHB1dFBhcnRzLnB1c2goJy4uJyk7XG4gIH1cblxuICBvdXRwdXRQYXJ0cyA9IG91dHB1dFBhcnRzLmNvbmNhdCh0b1BhcnRzLnNsaWNlKHNhbWVQYXJ0c0xlbmd0aCkpO1xuXG4gIHJldHVybiBvdXRwdXRQYXJ0cy5qb2luKCcvJyk7XG59O1xuXG59KShyZXF1aXJlKFwiX19icm93c2VyaWZ5X3Byb2Nlc3NcIikpIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxudmFyIGEsIGFydGljbGVfbGlzdCwgZGF0YSwgZnMsIGxpc3QsIHBhdGgsIHZhbHVlLCBfO1xuXG5mcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxucGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xuXG5hcnRpY2xlX2xpc3QgPSBbXCIuL3Bvc3RzL2Fib3V0LWNvZGVyLW5ld3NcIiwgXCIuL3Bvc3RzL2Z1dHVyZS1vZi1VSVwiLCBcIi4vcG9zdHMvd2h5LWNvbGxlY3QtbGlua3NcIiwgXCIuL3Bvc3RzL2xvdmUtbGFuZ3VhZ2VzXCIsIFwiLi9wb3N0cy9qb2luLWNvbW11bml0aWVzXCIsIFwiLi9wb3N0cy9ldmVyeW9uZS1nZXRzLW9sZFwiLCBcIi4vcG9zdHMveW91LWFuZC1tZS1kaWZmZXJlbnRcIiwgXCIuL3Bvc3RzL2Fib3V0LXRoaXMtc2l0ZVwiXTtcblxuYSA9IFwiLi9wb3N0cy9hYm91dC1jb2Rlci1uZXdzXCI7XG5cbnJlcXVpcmUoYSk7XG5cbmRhdGEgPSB7XG4gIDA6IHJlcXVpcmUoXCIuL3Bvc3RzL2Fib3V0LWNvZGVyLW5ld3NcIiksXG4gIDE6IHJlcXVpcmUoXCIuL3Bvc3RzL2Z1dHVyZS1vZi1VSVwiKSxcbiAgMjogcmVxdWlyZShcIi4vcG9zdHMvd2h5LWNvbGxlY3QtbGlua3NcIiksXG4gIDM6IHJlcXVpcmUoXCIuL3Bvc3RzL2xvdmUtbGFuZ3VhZ2VzXCIpLFxuICA0OiByZXF1aXJlKFwiLi9wb3N0cy9qb2luLWNvbW11bml0aWVzXCIpLFxuICA1OiByZXF1aXJlKFwiLi9wb3N0cy9ldmVyeW9uZS1nZXRzLW9sZFwiKSxcbiAgNjogcmVxdWlyZShcIi4vcG9zdHMveW91LWFuZC1tZS1kaWZmZXJlbnRcIiksXG4gIDc6IHJlcXVpcmUoXCIuL3Bvc3RzL2Fib3V0LXRoaXMtc2l0ZVwiKSxcbiAgODoge1xuICAgIHRpdGxlOiBcIuaPkOiurjog5oiR5Lus5Y+Y6YCa5LiLIEhOIOeahOaWueW8jywg5ZyoIEdpdGh1YiDkuIrliJvlu7rkuIDkuKrmioDmnK/orrrlnZtcIixcbiAgICBsaW5rOiBcImh0dHA6Ly92MmV4LmNvbS90LzY1NDcyXCIsXG4gICAgaW1hZ2U6IFwiaHR0cDovL2Rlc2lnbmJ5Y29mZmVlLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAxMi8wNC9obi5qcGdcIlxuICB9XG59O1xuXG5saXN0ID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgX3Jlc3VsdHM7XG5cbiAgX3Jlc3VsdHMgPSBbXTtcbiAgZm9yIChfIGluIGRhdGEpIHtcbiAgICB2YWx1ZSA9IGRhdGFbX107XG4gICAgX3Jlc3VsdHMucHVzaCh2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIF9yZXN1bHRzO1xufSkoKTtcblxuZXhwb3J0cy5ieV90aW1lID0gbGlzdDtcblxuZXhwb3J0cy5ieV9zb3J0ID0gbGlzdC5jb25jYXQoKS5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgaWYgKGEudGl0bGUgPiBiLnRpdGxlKSB7XG4gICAgcmV0dXJuIDE7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG59KTtcblxuY29uc29sZS5sb2cobGlzdCk7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG5leHBvcnRzLnRpdGxlID0gXCLnvJbnqIvor63oqIDnmoTniLHlpb0sIOeahOeUn+a0u+aAgeW6plwiO1xuXG5leHBvcnRzLmltYWdlID0gXCJodHRwOi8vcGhvdG9zLnR1Y2hvbmcuY29tLzEwOTEzNC9mLzIzNTQzMDcuanBnXCI7XG5cbmV4cG9ydHMuY29udGVudCA9IFwiXCI7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG5leHBvcnRzLnRpdGxlID0gXCLmvILkuq7nmoQgVUkg5piv572R6aG15Y+R5bGV55qE5pa55ZCRXCI7XG5cbmV4cG9ydHMuaW1hZ2UgPSBcImh0dHA6Ly9waG90b3MudHVjaG9uZy5jb20vNDg1NDgvZi8yMDU3Njc4LmpwZ1wiO1xuXG5leHBvcnRzLmNvbnRlbnQgPSBcIlwiO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuZXhwb3J0cy50aXRsZSA9IFwi5Li65LuA5LmI6KaB5pCc6ZuG6LWE5rqQLCDmlLbpm4botYTmupDnmoTlvIrnq68sIOaIkeW6lOivpeaAjuS5iOWBmlwiO1xuXG5leHBvcnRzLmltYWdlID0gXCJodHRwOi8vcGhvdG9zLnR1Y2hvbmcuY29tLzQzOTc2L2YvMTU0MDExNS5qcGdcIjtcblxuZXhwb3J0cy5jb250ZW50ID0gXCJcIjtcbiIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS42LjJcbmV4cG9ydHMudGl0bGUgPSBcIuiuqeS6uue+oeaFleeahOekvuWMulwiO1xuXG5leHBvcnRzLmltYWdlID0gXCJodHRwOi8vcGhvdG9zLnR1Y2hvbmcuY29tLzI0MDYyNi9mLzI5OTQyNTIuanBnXCI7XG5cbmV4cG9ydHMuY29udGVudCA9IFwiXCI7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG5leHBvcnRzLnRpdGxlID0gXCLkurrmgLvmmK/opoHoobDogIHnmoQsIOWPmOW+l+WSjOiHquW3seaDs+eahOS4jeS4gOagtywg5Y+Y5b6X5oiQ54afXCI7XG5cbmV4cG9ydHMuaW1hZ2UgPSBcImh0dHA6Ly9waG90b3MudHVjaG9uZy5jb20vNjI0MDQvZi8xNzYxMDY0LmpwZ1wiO1xuXG5leHBvcnRzLmNvbnRlbnQgPSBcIlwiO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuZXhwb3J0cy50aXRsZSA9IFwi5LiW55WM5LiK5pyJ55qE5Lq65by6LCDmnInnmoTkurrlvLEsIOS6i+aDheWwseaYr+i/meagt1wiO1xuXG5leHBvcnRzLmltYWdlID0gXCJodHRwOi8vcGhvdG9zLnR1Y2hvbmcuY29tLzMwNzk1L2YvNzY5NjcxLmpwZ1wiO1xuXG5leHBvcnRzLmNvbnRlbnQgPSBcIlwiO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuZXhwb3J0cy50aXRsZSA9IFwi5oiR5Y+R5biW6K6y5YWz5LqOIENvZGVyIE5ld3Mg6L+Z5Liq5ZCN5a2X55qE57uP5Y6GXCI7XG5cbmV4cG9ydHMuaW1hZ2UgPSBcImh0dHA6Ly9waG90b3MudHVjaG9uZy5jb20vMzg1MzgvZi8yMjAyNjQxLmpwZ1wiO1xuXG5leHBvcnRzLmNvbnRlbnQgPSBcIlwiO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxuZXhwb3J0cy50aXRsZSA9IFwi5YWz5LqO546w5Zyo6L+Z5Liq6aG16Z2iLCDkuLrku4DkuYjopoHmkK3lu7rov5nkuKrpobXpnaJcIjtcblxuZXhwb3J0cy5pbWFnZSA9IFwiaHR0cDovL3Bob3Rvcy50dWNob25nLmNvbS80Mjc2MC9mLzIyNDM3OTAuanBnXCI7XG5cbmV4cG9ydHMuY29udGVudCA9IFwi5pma5LiK6K6k55yf55yL5LqG5Yeg5Liq56+H5paw6Ze7LCDpg73mmK8gU3RhcnR1cCBOZXdzIOS4iueahCwg5pyJ54K56KKr5omT5YqoXFxu5pys5p2l5ZCD6L+H5pma6aWt5Ye66ZeoLCDlsLHmnInnp43kuInmm7TljYrlpJzooYzotbDlnKjlrabmoKHnmoTkuI3lronnmoTmhJ/op4nkuoZcXG7mmI/mmI/msonmsonlnLDnnIvnnYDmlofnq6AsIOiBlOaDs+WIsOS4gOS6mywg5bCx5Zyo5LiL6L655Yqg6K+E6K665YGa5o+Q56S6XFxu55yL5YiwIFYyRVgg5omv6L+H55qEIEBIaXQ5IOmTvuaOpemDveiiq+aUvuWIsOS4iui+ueS6hiwg6ams5LiK5pCc5YiwIEdpdGh1YlxcbuS4gOaDsywgU3RhcnR1cCBOZXdzIOS4iuivhOiuuueahOS6uuWkquWwkeS6hiwg5L6d54S25rKh5pyJ5pWI5p6c5ZGAXFxuXFxu5oiR55yL55qE5Yeg56+H5paH56ug5aSa5aSa5bCR5bCR5o+Q5Yiw56S+5Yy6LCDogIzmiJHlr7nmraTotorlj5HmhJ/liLDmhqfmhqznnYBcXG7ov5nml7blgJnnnJ/mnInkupvml6DlpYgsIOaDs+WIsOeVjOmdoueahOiuvuiuoSwg5bCx5aW95YOP5oqK5LmL5YmN5rKh5YGa55qE5YGa5Ye65p2lXFxu5pma5LiK5b+Z552A5pCt5qGG5p62LCDmlq3nu63kuIDkuKrlpJrlsI/ml7YsIGNvZmZlZSDnmoTmoYbmnrbln7rmnKzlrozmiJDkuoZcXG7nnLznnIvnjrDlnKjlt7Lnu4/ov4fkuoblh4zmmagsIOaIkeecn+ayoeWKm+awlOWGjeWuieW/g+aKmOiFvuS4i+WOu1xcbuacieS6m+S6i+aDheS8muaYr+S4gOaXtuS8pOaEnywg5YW06LW35Y675YGaLCDlhbTlsL3ogIzmraIsIOW4jOacm+i/meS4jeaYr1wiO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjYuMlxudmFyIGF1dGhlciwgY3NzLCBkZWxheSwgaGlkZV9wb3N0LCBodG1sLCBxLCByZW5kZXJfdGl0bGUsIHNob3dfcG9zdCwgX3JlZjtcblxuX3JlZiA9IHJlcXVpcmUoXCJsaWx5dHVyZlwiKSwgaHRtbCA9IF9yZWYuaHRtbCwgY3NzID0gX3JlZi5jc3M7XG5cbnEgPSBmdW5jdGlvbihxdWVyeSkge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihxdWVyeSk7XG59O1xuXG5FbGVtZW50LnByb3RvdHlwZS5xID0gZnVuY3Rpb24ocXVlcnkpIHtcbiAgcmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihxdWVyeSk7XG59O1xuXG5hdXRoZXIgPSB7XG4gIG5hbWU6IFwiaml5aW55aXlvbmdcIixcbiAgYXZhdGFyOiBcImh0dHA6Ly9waG90b3MudHVjaG9uZy5jb20vMTA4OTM0L2YvMjE1OTYyOS5qcGdcIlxufTtcblxucmVuZGVyX3RpdGxlID0gZnVuY3Rpb24ocG9zdCkge1xuICByZXR1cm4gaHRtbChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5kaXYoe1xuICAgICAgXCJjbGFzc1wiOiBcInBvc3RcIlxuICAgIH0sIHRoaXMuaW1nKHtcbiAgICAgIFwiY2xhc3NcIjogXCJhdmF0YXJcIixcbiAgICAgIHNyYzogYXV0aGVyLmF2YXRhcixcbiAgICAgIHRpdGxlOiBhdXRoZXIubmFtZVxuICAgIH0pLCB0aGlzLmRpdih7XG4gICAgICBcImNsYXNzXCI6IFwiaXRlbVwiXG4gICAgfSwgdGhpcy5kaXYoe1xuICAgICAgXCJjbGFzc1wiOiBcInRpdGxlXCIsXG4gICAgICBkYXRhOiBwb3N0LmNvbnRlbnQsXG4gICAgICBpbWFnZTogcG9zdC5pbWFnZVxuICAgIH0sIHBvc3QudGl0bGUpLCB0aGlzLnNwYW4oe1xuICAgICAgXCJjbGFzc1wiOiBcImxpbmtcIlxuICAgIH0sIHBvc3QubGluayAhPSBudWxsID8gcG9zdC5saW5rIDogXCJAXCIpKSk7XG4gIH0pO1xufTtcblxuc2hvd19wb3N0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBwb3N0O1xuXG4gIHBvc3QgPSBxKFwiI3Bvc3RcIik7XG4gIHBvc3Quc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCI7XG4gIHJldHVybiBwb3N0LnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcbn07XG5cbmRlbGF5ID0gZnVuY3Rpb24odCwgZikge1xuICByZXR1cm4gc2V0VGltZW91dChmLCB0KTtcbn07XG5cbmhpZGVfcG9zdCA9IGZ1bmN0aW9uKCkge1xuICBwb3N0LnEoXCIjcG9zdFwiKTtcbiAgZGVsYXkoNDAwLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gcG9zdC5zdHlsZS5oZWlnaHQgPSBcIjAlXCI7XG4gIH0pO1xuICByZXR1cm4gcG9zdC5zdHlsZS5vcGFjaXR5ID0gXCIwXCI7XG59O1xuXG5leHBvcnRzLnJlbmRlcl9saXN0ID0gZnVuY3Rpb24ocG9zdF9saXN0KSB7XG4gIHZhciBsaXN0O1xuXG4gIGxpc3QgPSBxKFwiI2xpc3RcIik7XG4gIHJldHVybiBsaXN0LmlubmVySFRNTCA9IGh0bWwoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZGl2KHtcbiAgICAgIFwiY2xhc3NcIjogXCJjb250YWluZXJcIlxuICAgIH0sIHBvc3RfbGlzdC5tYXAocmVuZGVyX3RpdGxlKS5qb2luKFwiXCIpKTtcbiAgfSk7XG59O1xuXG5leHBvcnRzLmJpbmRfbGlzdCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciBsaXN0O1xuXG4gIGxpc3QgPSBxKFwiI2xpc3RcIik7XG4gIHJldHVybiBsaXN0Lm9uY2xpY2sgPSBjYWxsYmFjaztcbn07XG5cbmV4cG9ydHMucmVuZGVyX3Bvc3QgPSBmdW5jdGlvbih0YWcpIHtcbiAgdmFyIGltYWdlO1xuXG4gIHNob3dfcG9zdCgpO1xuICBxKFwiI3RpdGxlXCIpLmlubmVyVGV4dCA9IHRhZy5pbm5lclRleHQ7XG4gIHEoXCIjY29udGVudFwiKS5pbm5lclRleHQgPSB0YWcuZ2V0QXR0cmlidXRlKFwiY29udGVudFwiKSB8fCBcIlwiO1xuICBpbWFnZSA9IHRhZy5nZXRBdHRyaWJ1dGUoXCJpbWFnZVwiKTtcbiAgcShcIiNwb3N0XCIpLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgaW1hZ2UgKyBcIilcIjtcbiAgaWYgKHRhZy5saW5rKSB7XG4gICAgcShcIi5saW5rXCIpLmlubmVyVGV4dCA9IHRhZy5saW5rO1xuICAgIHJldHVybiBxKFwiLmxpbmtcIikuaHJlZiA9IFwiaHR0cDovL1wiICsgdGFnLmxpbms7XG4gIH1cbn07XG5cbmV4cG9ydHMub3Blbl9saW5rID0gZnVuY3Rpb24obGluaykge1xuICBpZiAobGluay5tYXRjaCgvXFx3XFwuXFx3LykpIHtcbiAgICByZXR1cm4gd2luZG93Lm9wZW4obGluayk7XG4gIH1cbn07XG5cbmV4cG9ydHMuYmluZF90b3AgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICByZXR1cm4gcShcIi5tZW51IC50b3BcIikub25jbGljayA9IGNhbGxiYWNrO1xufTtcblxuZXhwb3J0cy5iaW5kX25ldyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHJldHVybiBxKFwiLm1lbnUgLm5ld1wiKS5vbmNsaWNrID0gY2FsbGJhY2s7XG59O1xuXG5leHBvcnRzLmJpbmRfYmFjayA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHJldHVybiBxKFwiI2JhY2tcIikub25jbGljayA9IGNhbGxiYWNrO1xufTtcblxuZXhwb3J0cy5oaWRlX3Bvc3QgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGhpZGVfcG9zdCgpO1xufTtcblxuZXhwb3J0cy50ZXN0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBkZWxheSgwLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gcShcIiNsaXN0IC5wb3N0IC50aXRsZVwiKS5jbGljaygpO1xuICB9KTtcbn07XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNi4yXG52YXIgY3NzLCBjc3NfdG9vbHMsIGh0bWxfc2NvcGUsIGh0bWxfdG9vbHMsIHBhaXJfZWxlbXMsIHJlc29sdmUsIHNpbmdsZV9lbGVtcyxcbiAgX19zbGljZSA9IFtdLnNsaWNlO1xuXG5odG1sX3Njb3BlID0ge307XG5cbnBhaXJfZWxlbXMgPSBcImhlYWQgdGl0bGUgYm9keSBzY3JpcHQgIGRpdiBuYXYgaGVhZGVyIGZvb3RlciBzZWN0aW9uIGFydGljbGUgIHAgc3BhbiB0ZXh0YXJlYSBiciBwcmUgY29kZSBhIGFkZHJlc3MgYiBiYWNrcXVvdGUgIGJ1dHRvbiBmb250IGZyYW1lIGZvcm0gaHIgaSAgdWwgbGkgb2wgdGFibGUgdHIgdGQgdGggdGl0bGUgIGNhbnZhcyBhdWRpbyB2aWRlbyBzZWxlY3Qgc3R5bGVcIi5zcGxpdCgvXFxzKy8pO1xuXG5zaW5nbGVfZWxlbXMgPSBcImltZyBtZXRhIGlucHV0IGxpbmsgaWZyYW1lIGF1ZGlvIHZpZGVvXCIuc3BsaXQoL1xccysvKTtcblxuaHRtbF90b29scyA9IHtcbiAgYXR0cnM6IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBhdHRycywga2V5LCB2YWx1ZTtcblxuICAgIGF0dHJzID0gXCJcIjtcbiAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgIHZhbHVlID0gb2JqW2tleV07XG4gICAgICBhdHRycyArPSBcIiBcIiArIGtleSArIFwiPSdcIiArIHZhbHVlICsgXCInXCI7XG4gICAgfVxuICAgIHJldHVybiBhdHRycztcbiAgfSxcbiAgdGV4dDogZnVuY3Rpb24odGV4dCkge1xuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoLyYvZywgXCImYW1wO1wiKS5yZXBsYWNlKC88L2csIFwiJmx0O1wiKS5yZXBsYWNlKC8+L2csIFwiJmd0O1wiKS5yZXBsYWNlKC9cXHMvZywgXCImbmJzcDtcIik7XG4gIH1cbn07XG5cbnJlc29sdmUgPSBmdW5jdGlvbihsaXN0KSB7XG4gIHZhciBlbGVtLCBvYmo7XG5cbiAgb2JqID0ge307XG4gIGVsZW0gPSBbXTtcbiAgbGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICB2YXIga2V5LCB0aGF0LCB2YWx1ZSwgX2ksIF9sZW4sIF9yZXN1bHRzLCBfcmVzdWx0czE7XG5cbiAgICBpZiAoaXRlbSAhPSBudWxsKSB7XG4gICAgICBpZiAoaXRlbS5fX3Byb3RvX18gPT09IE9iamVjdC5wcm90b3R5cGUpIHtcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChrZXkgaW4gaXRlbSkge1xuICAgICAgICAgIHZhbHVlID0gaXRlbVtrZXldO1xuICAgICAgICAgIF9yZXN1bHRzLnB1c2gob2JqW2tleV0gPSB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXN1bHRzO1xuICAgICAgfSBlbHNlIGlmIChpdGVtLl9fcHJvdG9fXyA9PT0gQXJyYXkucHJvdG90eXBlKSB7XG4gICAgICAgIF9yZXN1bHRzMSA9IFtdO1xuICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IGl0ZW0ubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICB0aGF0ID0gaXRlbVtfaV07XG4gICAgICAgICAgX3Jlc3VsdHMxLnB1c2goZWxlbS5wdXNoKHRoYXQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHMxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGVsZW0ucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gW29iaiwgZWxlbV07XG59O1xuXG5wYWlyX2VsZW1zLm1hcChmdW5jdGlvbih0YWcpIHtcbiAgcmV0dXJuIGh0bWxfc2NvcGVbdGFnXSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsaXN0LCBvYmosIF9yZWY7XG5cbiAgICBsaXN0ID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gX19zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICBfcmVmID0gcmVzb2x2ZShsaXN0KSwgb2JqID0gX3JlZlswXSwgbGlzdCA9IF9yZWZbMV07XG4gICAgcmV0dXJuIFwiPFwiICsgdGFnICsgKGh0bWxfdG9vbHMuYXR0cnMob2JqKSkgKyBcIj5cIiArIChsaXN0LmpvaW4oXCJcIikpICsgXCI8L1wiICsgdGFnICsgXCI+XCI7XG4gIH07XG59KTtcblxuc2luZ2xlX2VsZW1zLm1hcChmdW5jdGlvbih0YWcpIHtcbiAgcmV0dXJuIGh0bWxfc2NvcGVbdGFnXSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkge1xuICAgICAgb2JqID0ge307XG4gICAgfVxuICAgIHJldHVybiBcIjxcIiArIHRhZyArIChodG1sX3Rvb2xzLmF0dHJzKG9iaikpICsgXCIvPlwiO1xuICB9O1xufSk7XG5cbmh0bWxfc2NvcGUuaHRtbCA9IGZ1bmN0aW9uKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nO1xufTtcblxuaHRtbF9zY29wZS50ZXh0ID0gaHRtbF90b29scy50ZXh0O1xuXG5jc3NfdG9vbHMgPSB7XG4gIHRlbXBsYXRlOiBmdW5jdGlvbihiYXNlLCBzZWxlY3RvciwgZGVjbGFyYXRpb24pIHtcbiAgICByZXR1cm4gXCJcIiArIGJhc2UgKyBcIiBcIiArIHNlbGVjdG9yICsgXCJ7XFxuXCIgKyBkZWNsYXJhdGlvbiArIFwiXFxufVxcblwiO1xuICB9LFxuICB1dGlsczoge1xuICAgIGhzbDogZnVuY3Rpb24oaCwgcywgbCkge1xuICAgICAgcmV0dXJuIFwiaHNsKFwiICsgaCArIFwiLCBcIiArIHMgKyBcIiUsIFwiICsgbCArIFwiJSlcIjtcbiAgICB9LFxuICAgIGhzbGE6IGZ1bmN0aW9uKGgsIHMsIGwsIGEpIHtcbiAgICAgIHJldHVybiBcImhzbChcIiArIGggKyBcIiwgXCIgKyBzICsgXCIlLCBcIiArIGwgKyBcIiUsIFwiICsgYSArIFwiKVwiO1xuICAgIH1cbiAgfSxcbiAgdHlwZTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgbWF0Y2gsIHN0cmluZztcblxuICAgIG1hdGNoID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5tYXRjaCgvXFxzXFx3Ky8pO1xuICAgIHN0cmluZyA9IG1hdGNoWzBdLnNsaWNlKDEpO1xuICAgIHJldHVybiBzdHJpbmcudG9Mb3dlckNhc2UoKTtcbiAgfSxcbiAgcHJldHR5OiBmdW5jdGlvbihjaGFyKSB7XG4gICAgaWYgKGNoYXIubWF0Y2goL15bQS1aXSQvKSAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gXCItXCIgKyBjaGFyLnRvTG93ZXJDYXNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjaGFyO1xuICAgIH1cbiAgfVxufTtcblxuY3NzID0gZnVuY3Rpb24oZ2VuZXJhdG9yKSB7XG4gIHZhciBkYXRhLCBzdHlsZSwgd3JpdGVfcnVsZTtcblxuICBzdHlsZSA9IFwiXCI7XG4gIGNzc190b29scy51dGlscy5nZW5lcmF0b3IgPSBnZW5lcmF0b3I7XG4gIGRhdGEgPSBjc3NfdG9vbHMudXRpbHMuZ2VuZXJhdG9yKCk7XG4gIHdyaXRlX3J1bGUgPSBmdW5jdGlvbihiYXNlLCBkYXRhKSB7XG4gICAgdmFyIGF0dHJpYnV0ZSwgZGVjbGFyYXRpb24sIG5lc3Rfc2VsZWN0b3IsIG5lc3RlZCwgcGxhaW4sIHJ1bGUsIHNlbGVjdG9yLCB2YWx1ZSwgdmFsdWVzLCBfaSwgX2xlbiwgX3Jlc3VsdHM7XG5cbiAgICBuZXN0ZWQgPSB7fTtcbiAgICBmb3IgKHNlbGVjdG9yIGluIGRhdGEpIHtcbiAgICAgIGRlY2xhcmF0aW9uID0gZGF0YVtzZWxlY3Rvcl07XG4gICAgICBwbGFpbiA9IFtdO1xuICAgICAgZm9yIChhdHRyaWJ1dGUgaW4gZGVjbGFyYXRpb24pIHtcbiAgICAgICAgdmFsdWUgPSBkZWNsYXJhdGlvblthdHRyaWJ1dGVdO1xuICAgICAgICBpZiAoKGNzc190b29scy50eXBlKHZhbHVlKSkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBuZXN0X3NlbGVjdG9yID0gXCJcIiArIGJhc2UgKyBcIiBcIiArIHNlbGVjdG9yO1xuICAgICAgICAgIGlmIChuZXN0ZWRbbmVzdF9zZWxlY3Rvcl0gPT0gbnVsbCkge1xuICAgICAgICAgICAgbmVzdGVkW25lc3Rfc2VsZWN0b3JdID0ge307XG4gICAgICAgICAgfVxuICAgICAgICAgIG5lc3RlZFtuZXN0X3NlbGVjdG9yXVthdHRyaWJ1dGVdID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXR0cmlidXRlID0gYXR0cmlidXRlLnNwbGl0KFwiXCIpLm1hcChjc3NfdG9vbHMucHJldHR5KS5qb2luKFwiXCIpO1xuICAgICAgICAgIGlmICgoY3NzX3Rvb2xzLnR5cGUodmFsdWUpKSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgdmFsdWUgPSBcIlwiICsgdmFsdWUgKyBcInB4XCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgoY3NzX3Rvb2xzLnR5cGUodmFsdWUpKSA9PT0gXCJhcnJheVwiKSB7XG4gICAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgIGZvciAoX2kgPSAwLCBfbGVuID0gdmFsdWVzLmxlbmd0aDsgX2kgPCBfbGVuOyBfaSsrKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gdmFsdWVzW19pXTtcbiAgICAgICAgICAgICAgcGxhaW4ucHVzaChcIiAgXCIgKyBhdHRyaWJ1dGUgKyBcIjogXCIgKyB2YWx1ZSArIFwiO1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGxhaW4ucHVzaChcIiAgXCIgKyBhdHRyaWJ1dGUgKyBcIjogXCIgKyB2YWx1ZSArIFwiO1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwbGFpbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIGRlY2xhcmF0aW9uID0gcGxhaW4uam9pbihcIlxcblwiKTtcbiAgICAgICAgcnVsZSA9IGNzc190b29scy50ZW1wbGF0ZShiYXNlLCBzZWxlY3RvciwgZGVjbGFyYXRpb24pO1xuICAgICAgICBzdHlsZSArPSBydWxlLnRyaW1MZWZ0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICgoT2JqZWN0LmtleXMobmVzdGVkKSkubGVuZ3RoID4gMCkge1xuICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoYmFzZSBpbiBuZXN0ZWQpIHtcbiAgICAgICAgZGF0YSA9IG5lc3RlZFtiYXNlXTtcbiAgICAgICAgX3Jlc3VsdHMucHVzaCh3cml0ZV9ydWxlKGJhc2UsIGRhdGEpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICB9XG4gIH07XG4gIHdyaXRlX3J1bGUoXCJcIiwgZGF0YSk7XG4gIHJldHVybiBzdHlsZTtcbn07XG5cbmV4cG9ydHMuaHRtbCA9IGZ1bmN0aW9uKGdlbmVyYXRvcikge1xuICByZXR1cm4gZ2VuZXJhdG9yLmNhbGwoaHRtbF9zY29wZSk7XG59O1xuXG5leHBvcnRzLmNzcyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgcmV0dXJuIGNzcyhkYXRhKTtcbn07XG4iXX0=
;