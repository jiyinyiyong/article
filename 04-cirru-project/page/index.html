<!DOCTYPE html>
<html>
  <head>
    <title>template</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="page.css">
    <link rel="stylesheet" href="../../../cirru/cirru-editor/src/cirru-editor.css">
    <script src="../../../cirru/cirru-editor/sea-modules/seajs/1.3.0-dev/sea.js"></script>
    <script>
      seajs.use('./handle')
      seajs.use('./editor')
    </script>
  </head>
  <body>
    <div id="wrap">
      <canvas width="960px" height="400px" id="logo"></canvas>
      <div class="title">关于 cirru project 的意图</div>
      <p>早时候想学写解释器, 因为学一门语言适应别人的习惯其实很难, 不如自己做一遍</p>
      <p>马上就会发现这很难, 于是很多时光的烦恼和消磨, 偶然有所得, 努力记录在这里</p>
      <p><span>细节的内容我会在</span><a href="https://github.com/jiyinyiyong">Github</a><span>上写更多的细节, 这里主要是已经实现的部分的文档记录</span></p>
      <p>希望我之前的努力能带给别人方便, 更主要希望能减轻自己的困境</p>
      <p><span>代码看</span><a href="https://github.com/jiyinyiyong/cirru-editor">cirru-editor</a><span>和</span><a href="https://github.com/jiyinyiyong/cirru-eval">cirru-eval</a><span>两个部分, 代码借助</span><a href="http://seajs.org/">SeaJS</a><span>组织和拼接到一起</span></p>
      <p>虽然说解释器, 主题还是对于 JS 各种数据类似的封装, 会 JS 的话直接开始看例子吧</p>
      <div class="title">关于编辑器的使用</div>
      <p>如果感兴趣, 可以下载编辑器模块代码, 参考例子搭建. 这里讲界面用法</p>
      <p><span>方向键和几个</span><code>ctrl+</code><span>的复制粘贴案件我模拟了一下, 另外</span><code>ctrl+m</code><span>用来输入中文</span></p>
      <p>点击一块变成蓝色之后, 按下字母数字就能看到反应, 而回车键用来创建嵌套</p>
      <p>嵌套是 Cirru 的核心. 方向键和翻页键实现不够强大, 实际上频繁被用到</p>
      <p>编辑了代码之后, 点击对应红色查看运行结果. 只能算个例子吧, 很多情况会出错的</p>
      <p><span>输出的结果是</span><code>global</code><span>作用域当中的内容, 另外就是一数字形式输出的</span><code>print</code></p>
      <div class="title">基本的字符串数字和打印</div>
      <p>Cirru 不用符号来区别不同的数据类型, 需要用单词声明其对应 JS 的类型</p>
      <div class="pair">
        <div id="editor-0" class="cirru-editor"></div>
        <div id="result-0" class="result"></div>
      </div>
      <div class="title">设置修改变量以及运算</div>
      <p>对于变量没有等号语法, 相对于 Scheme 这个还是好理解的, 这样再来运算</p>
      <p>注意变量名可以是任何字符, 空格通过制表符来进行实现, 另外空字符串比较难对付</p>
      <div class="pair">
        <div id="editor-1" class="cirru-editor"></div>
        <div id="result-1" class="result"></div>
      </div>
      <div class="title">作用域通过 JSON 实现</div>
      <p><span>可能类似</span><a href="https://github.com/coffee-js/languages/issues/5#issuecomment-9323297">Flow</a><span>语言. 我用对象的</span><code>__proto__</code><span>去把作用域实现出来了, 也许有些古怪</span></p>
      <p>作用域作为数据结构的本身的意义就像 JS 函数能作为类型构造器参与实现新的数据形态</p>
      <p>另外我的想法是编程语言自身也应该是能被自己作为数据操作的才对, 比如作用域</p>
      <p>参考基于原型的语言中 JSON 和函数作用域的绑定的关系, 我认为这未来能发挥作用</p>
      <p><span>代码中</span><code>under</code><span>和</span><code>inside</code><span>的区别在于前者创建了作用域, 而后者直接覆写了对象的键</span></p>
      <div class="pair">
        <div id="editor-2" class="cirru-editor"></div>
        <div id="result-2" class="result"></div>
      </div>
      <div class="title">函数和匿名函数</div>
      <p><span>函数是语言必备的, 语法上可行, 我大概进行了测试. 注意隐式的</span><code>return</code></p>
      <p>能力原因, 列表的头部还只能是字符串, 不然下面最后一个例子里连写函数了</p>
      <p><span>另外 JS 关系, 函数并不能在右侧输出结果的</span><code>global</code><span>里显示出来, 所以</span><code>{}</code><span>是空的</span></p>
      <div class="pair">
        <div id="editor-3" class="cirru-editor"></div>
        <div id="result-3" class="result"></div>
      </div>
      <div class="title">函数的作用域</div>
      <p>函数的意思是作用域保存为闭包, 下次调用时可以引用到闭包里的数据</p>
      <p>我好奇另一种, 比如函数局部作用域是继承在执行环境中的数据, 动态词法域?</p>
      <div class="pair">
        <div id="editor-4" class="cirru-editor"></div>
        <div id="result-4" class="result"></div>
      </div>
      <mixin></mixin>
    </div>
  </body>
</html>