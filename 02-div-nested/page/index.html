<!DOCTYPE html>
<html>
  <head>
    <title>嵌套的 div</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="page.css">
    <script src="handle.js"></script>
  </head>
  <body>
    <div id="wrap">
      <div class="header">最初的想法</div>
      <div class="section">
        <p>这个想法在我会点技术前就萌生了, 以至于有些惊奇当时的点子现在如何如何</p>
        <p><span>后来我用文本多次描述过,</span><a href="http://jiyinyiyong.github.com/blog/posts/120725-里坊-网页的嵌套.html">比如旧的博客上</a><span>, 或者更早的笔记上</span></p>
        <p>最开始很清晰, 网页上的部件是独立的, 这是所有人都能一致地理解的</p>
        <p>那么一个拖拽的动作对应元素被摘取, 就像剪报, 或者剪葡萄. 首先效果是可行的</p>
        <div class="card">
          <div class="drag-area">
            <div class="page"><span>this is a web page</span>
              <div class="inside"><span>something inside a page</span>
                <div id="can-drag">drag ,this</div>
              </div>
              <div class="others"><span>something else</span></div>
            </div>
            <div class="out"><span>drop that here</span></div>
          </div>
        </div>
        <p>借助此类功能, 可以重新排列网页上的内容, 并保存在本地做其他使用</p>
        <p>这放在 Windows8 的开始菜单上就好懂了, 一个导航栏需要能重排的</p><a href="http://mashable.com/2012/10/25/windows-8-overview/" title="picture from Mashable" class="img"><img src="../pic/metro.jpeg"></a>
        <p>之后, 我可以从每个网页上取下不同的片段, 放到一起拼凑成为一张页面</p>
        <p><span>结果那段时间我着迷叫做</span><a href="http://zh.wikipedia.org/wiki/Widget">Widget</a><span>的技术, 用在网页上提供漂亮的挂件, 并自动更新</span></p>
        <p>而现在桌面甚至移动平台都很流行这种挂件了, 当时就是这么喜欢</p><a href="http://www.techradar.com/news/phone-and-communications/mobile-phones/20-best-android-widgets-965387" title="picture from techrepublic" class="img"><img src="../pic/android.jpg"></a>
        <p>相对来说, 现在的挂件和我想的不同在于, 我需要进行嵌套</p>
      </div>
      <div class="header">开始嵌套 DIV</div>
      <div class="section">
        <p>在网页中, 嵌套是常见的, 只不过, 用 HTML 写出来效果并不好, 或者说 CSS</p>
        <p><span>我这里用了</span><a href="http://www.zhangxinxu.com/wordpress/2010/12/css-box-flex属性，然后弹性盒子模型简介/"><code>-webkit-box</code></a><span>这个私有属性, 此外</span><a href="http://benfrain.com/understanding-the-css3-flexbox-flexible-box-layout-module/"><code>flexbox</code></a><span>依然在演进</span></p>
        <p>在 Chrome 以外浏览器或者时间长了错乱了也在预料之中. 总之能这样布局</p>
        <div class="uri">/index.html</div>
        <div id="card-1" class="card">
          <div class="home">
            <div class="less-info">
              <div class="logo">logo Demo</div>
              <div class="words">
                <p>name</p>
                <p>age</p>
                <p>loves</p>
              </div>
            </div>
            <div class="more-info">
              <div class="info">
                <p>more about info</p>
                <p>so, this it a Demo</p>
              </div>
            </div>
          </div>
          <div class="list">
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
          </div>
        </div>
        <p><span>难点在于,</span><a href="http://www.w3.org/People/Raggett/book4/ch02.html">HTML 当初可不是那么设计的</a><span>, 如果我想写, 几乎要重复一边所有细节</span></p>
        <p>如果在一门编程语言里遇到有相同的代码要重复多遍, 恐怕不需要犹豫, 用函数</p>
        <p><span>因此后端的模板引擎总有办法对付这个问题, 比如</span><a href="http://naltatis.github.com/jade-syntax-docs/#mixin">Jade</a><span>提供的</span><a href="https://github.com/visionmedia/jade#a13">Include</a><span>和</span><a href="https://github.com/visionmedia/jade#a14">Mixin</a></p>
        <p>而且实时上我的代码尝试这样生成了, 重复的代码用一个函数重复调用</p>
        <div class="img"><img src="../pic/code.png"></div>
        <p><span>那么借助 Jade 和</span><a href="http://slim-lang.com/">Slim</a><span>, HTML 编写过程中的嵌套和代码复用基本可行了</span></p>
        <p>在 MVC 模式的服务端中, 网页就是通过模板的嵌套和组合来完成渲染的</p>
      </div>
      <div class="header">进一步的想法</div>
      <div class="section">
        <p>那么我想更具体地, 提供一些更细节的 URL 来允许网页的局部能被请求和加载</p>
        <p><span>单纯请求的实现是简单的, 只要定义相应 GET 请求的</span><code>pathname</code><span>能返回 HTML 即可</span></p>
        <p>比如下面的例子, 对单独的 DIV 组件给出路径, 每个部分能被单独请求</p>
        <div class="uri">/list.html</div>
        <div class="card">
          <div class="list">
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
          </div>
        </div>
        <div class="uri">/item.html</div>
        <div id="card-3" class="card">
          <div class="list-item">
            <div class="logo">Demo</div>
            <div class="text">text Demo</div>
          </div>
        </div>
        <div class="uri">/info.html</div>
        <div class="card">
          <div class="home">
            <div class="less-info">
              <div class="logo">logo Demo</div>
              <div class="words">
                <p>name</p>
                <p>age</p>
                <p>loves</p>
              </div>
            </div>
            <div class="more-info">
              <div class="info">
                <p>more about info</p>
                <p>so, this it a Demo</p>
              </div>
            </div>
          </div>
        </div>
        <p><span>那么</span><span class="uri">/info.html</span><span>之下的 DIV 我就不罗列了, 可以在</span><a href="http://expressjs.com/">Express</a><span>里写出来</span></p>
        <p>另外实用的还有浏览器端 MVC 框架和浏览器端模板引擎的方案, 但这里不考虑</p>
      </div>
      <div class="header">继续扩展到客户端</div>
      <div class="section">
        <p>当服务器肯给出局部的页面, 自然会考虑在浏览器端进行拼装, 形成网页</p>
        <div id="card-4" class="card">
          <div class="home">
            <div class="less-info">
              <div class="logo">logo Demo</div>
              <div class="words">
                <p>name</p>
                <p>age</p>
                <p>loves</p>
              </div>
            </div>
            <div class="more-info">
              <div class="info">
                <p>more about info</p>
                <p>so, this it a Demo</p>
              </div>
            </div>
          </div>
          <div class="list">
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
            <div class="list-item">
              <div class="logo">Demo</div>
              <div class="text">text Demo</div>
            </div>
          </div>
          <div id="mask"><span class="hint-info uri">/info.html</span><span class="hint-list uri">/list.html</span><span class="hint-item uri">/item.html</span><span id="hint-item2" class="hint-item uri">/item.html</span><span id="hint-item3" class="hint-item uri">/item.html</span></div>
        </div>
        <p>这就需要有相应技术在网页内嵌入网页, 而不只是 HTML 网页再渲染到 DIV</p>
        <p>同时编写页面的语法中, 就隐含了将代码本身作为引入代码的框架结构</p>
        <p><span>比如</span><code>&lt;iframe&gt;</code><span>就能嵌入网页. 再者, 其中也应该有 JS 环境在运行</span>
        </p>
        <p><span>所以我想: </span><b>每个嵌入的网页都是 Object, 对外暴露接口, 内部含有私有数据</b></p>
        <p>另外可增加一些选项让网页能更多样的功能:</p>
        <ul>
          <li>内嵌页面可以知道自己的层级和大小, 以便隐藏更一些深层的网页</li>
          <li>页面可以循环包含, 在显示时默认不会展开全部层级页面</li>
          <li>有进入子页面, 返回上级页面, 跳转相应页面等选项</li>
        </ul>
      </div>
      <div class="header">网络是城市</div>
      <div class="section">
        <p><span>上面几点细节出来之前, 发生的一件事情是豆瓣的</span><a href="http://alphatown.com/">阿尔法城</a><span>开始了测试</span></p>
        <p>随着时间我越发感到网络该是城市, 是世界, 而不是用来生产搜索推荐结果的机器</p><a href="http://site.douban.com/widget/notes/3420186/note/155306775/" class="img"><img src="../pic/douban.jpg"></a>
        <p>我发现阿尔法城缺少一种嵌套的自由, 于是结合之前所想开始想象嵌套</p>
        <p>试想, 你进入城市, 到街道, 到大厦, 到楼层, 到房间, 而在网上有着无限的维度</p>
        <p>曾经人们需要用链接打开一个个页面才能展开新的空间看新的事物</p>
        <p>而我的模型通向更多样的方位, 可以想象等人机交互更成熟, 其中如何导航</p>
      </div>
      <div class="header">关于模块化</div>
      <div class="section">
        <p>另外每个页面是一个单独的环境让 JS 运行, 我觉得模块化上就更清晰了</p>
        <p>当然, 这种情况下需要更多跨页面通信的技术, 我想还是超乎现实的</p>
        <p>也许, 我说也许, 可以有新的语言跳过 HTML/CSS/JS , 尝试去看别样的一个未来</p>
        <div id="arch" class="card">
          <div class="implement">
            <div class="files">
              <div class="js">remote files</div>
              <div class="js">local files</div>
              <div class="js">remote files</div>
            </div>
            <div class="env">engine & environment</div>
            <div class="core">
              <div class="net">net</div>
              <div class="graphic">graphic</div>
            </div>
          </div>
          <div class="script">single language</div>
        </div>
        <p>关于维护多个并行的环境并相互传递参数的架构我还没接触到, 大概是并行</p>
        <p>总之我觉得那是一个不错的未来, 每个标签作为对象.. 期待吧</p>
      </div>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jiyinyiyong';
        // required: replace example with your forum shortname
        
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            if (document.getElementsByTagName('head')[0]) {
              document.getElementsByTagName('body')[0].appendChild(dsq);
            }
        })();
      </script>
      <noscript><span>Please enable JavaScript to view the</span><a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink"><span>comments powered by</span><span class="logo-disqus"></span></a>
    </div>
  </body>
</html>